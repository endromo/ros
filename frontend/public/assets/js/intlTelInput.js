$.FI={functions:Array(),plugins:Array(),readys:Array(),lang:{},extend:function(funcorsel,plugin){if(typeof(funcorsel)=='function'){$.FI.functions[$.FI.functions.length]=funcorsel;return true;}
if(typeof(funcorsel)=='string'&&typeof(plugin)=='undefined'){plugin=funcorsel;funcorsel='';}
$.FI.plugins[$.FI.plugins.length]={selector:funcorsel,plugin:plugin};},ready:function(func){$.FI.readys[$.FI.readys.length]=func;},hasFlash:function(){if(navigator.plugins&&navigator.plugins.length){var plugin=navigator.plugins['Shockwave Flash'];if(plugin)
return true;if(navigator.plugins['Shockwave Flash 2.0'])
return true;}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var mimeType=navigator.mimeTypes['application/x-shockwave-flash'];return mimeType&&mimeType.enabledPlugin;}else{try{var ax=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.7');return true;}catch(e){try{var ax=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');return true;}catch(e){try{var ax=new ActiveXObject('ShockwaveFlash.ShockwaveFlash');return true;}catch(e){return false;}}}}
return false;},toast:function(msg,type,duration){if(typeof($.loading)=='undefined')
return false;if(!msg){$.loading(false);return false;}
msg=msg.replace(/<(\/?)(pre|code)/igm,'<$1div');if(type)msg='<div class="tooltip '+type+'"><span>'+msg+'</span></div>';if(typeof(duration)=='undefined')duration=5000;var tooltip=$('<div>'+msg+'</div>').find('.tooltip');$.loading(false);$.loading(true,{html:(tooltip.length?tooltip.prop('outerHTML'):'<span>'+msg+'</span>'),text:'',pulse:false,max:duration});return false;},format:function(format,args){return format.replace(/{(\d+)}/g,function(match,number){return(typeof args[number-1]!='undefined'?args[number-1]:match);});},dialog:function(type,msg,args,val){if(args&&args.length)
msg=$.FI.format(msg,args);if(type=='prompt'){return prompt(msg,val);}else if(type=="confirm"){return confirm(msg);}else{return alert(msg);}},alert:function(msg,args){return $.FI.dialog('alert',msg,args);},confirm:function(msg,args){return $.FI.dialog('confirm',msg,args);},prompt:function(msg,args,val){return $.FI.dialog('prompt',msg,args,val);},tip:function(elm){try{$(elm).tipsy({trigger:'manual',html:true,opacity:1.0,additionalClassName:'tipsy-big',closeButton:true,gravity:'n'}).tipsy("show");}catch(e){alert($(elm).attr('title'));}},copyToClipboard:function(text){if(!navigator.clipboard){$.FI.toast('Clipboard not supported.');return;}
navigator.clipboard.writeText(text).then(function(){$.FI.toast('Copied to clipboard.','success');},function(err){$.FI.toast('Error: ',err.message,'error');});},getSelection:function(){var html="";if(typeof window.getSelection!="undefined"){var sel=window.getSelection();if(sel.rangeCount){var container=document.createElement("div");for(var i=0,len=sel.rangeCount;i<len;++i){container.appendChild(sel.getRangeAt(i).cloneContents());}
html=container.innerHTML;}}else if(typeof document.selection!="undefined"){if(document.selection.type=="Text")
html=document.selection.createRange().htmlText;}
return html;},inIframe:function(){try{return window.self!==window.top;}catch(e){return true;}},inViewport:function(elm,approximately){if(!elm)
return false;if(typeof jQuery==="function"&&elm instanceof jQuery)
elm=elm[0];var rect=elm.getBoundingClientRect();var bottom=0;if(approximately)
bottom=(window.innerHeight||document.documentElement.clientHeight)/4;return(rect.bottom>=bottom&&rect.right>=0&&rect.top<=(window.innerHeight||document.documentElement.clientHeight)&&rect.left<=(window.innerWidth||document.documentElement.clientWidth));}};$.fn.extend({FI:function(){return this.each(function(){var jthis=$(this);if(typeof($.loading)!='undefined')
$.loading({onAjax:true,delay:1000});jthis.find('.recaptchav3').each(function(){var jthis=$(this);var jform=jthis.closest('form');if(!jform.length||!jthis.data('sitekey'))
return;jform.unbind('.recaptchav3').bind('submit.recaptchav3',function(e){if(typeof(grecaptcha)=='undefined')
return;e.preventDefault();e.stopPropagation();grecaptcha.ready(function(){grecaptcha.execute(jthis.data('sitekey'),{action:'recaptchav3'}).then(function(token){jform.prepend('<input type="hidden" name="g-recaptcha-response" value="'+token+'">');jform.prepend('<input type="hidden" name="g-recaptcha-action" value="recaptchav3">');jform.unbind('.recaptchav3');if(e.originalEvent&&e.originalEvent.submitter)
$(e.originalEvent.submitter).click();else
jform.submit();});});})});jthis.find('.confirm').each(function(){var jthis=$(this);jthis.unbind('click.FI').bind('click.FI',function(e){if(e.ctrlKey||jthis.is('input[type=checkbox]:not(:checked)'))
return;var faction=jthis.attr('href');var isprompt=jthis.is('.prompt');var confirmtitle=(jthis.attr('confirm-title')||jthis.attr('title')||jthis.attr('original-title')||jthis.attr('value')||jthis.text()||'Please confirm your action')+'?!';var confirmed;var promptvar=jthis.attr('data-prompt-var');var promptnote='';if(isprompt){if(!promptvar)
promptvar='note';if(jthis.attr('data-prompt-title'))
confirmtitle=jthis.attr('data-prompt-title');confirmed=prompt(confirmtitle);if(confirmed!==null){promptnote=confirmed;confirmed=true;}else{confirmed=false;}}else{confirmed=confirm(confirmtitle);}
if(faction&&(faction.indexOf('#')===0||faction.indexOf('javascript:')===0))
faction=false;if(confirmed&&faction&&this.tagName.toLowerCase()=='a'&&!jthis.is('.ajax_content')&&!jthis.is('.ajax_link'))
{var fvariable=faction.match(/\/([a-z_-]+)\/?([0-9\.]*?)$/);var jform=$("<form action='"+faction+"' method='post' "+
(jthis.prop('target')?"target='"+jthis.prop('target')+"'":"")+" style='display:none;'>"+"<input type='hidden' name='"+CI_CSRF_TOKEN_NAME+"' value='"+CI_CSRF_TOKEN_VALUE+"' />"+
(isprompt?"<input type='hidden' name='"+promptvar+"' value='"+encodeURIComponent(promptnote)+"' />":"")+
(fvariable&&fvariable[1]&&fvariable[2]?"<input type='hidden' name='"+fvariable[1]+"' value='"+fvariable[2]+"' />":"")+"<input type='hidden' name='confirmed' value='Yes' />"+"</form>");$('body').append(jform);jform.submit();return false;}
if(confirmed)
jthis.trigger('click_confirmed');else
e.stopImmediatePropagation();return confirmed;});});if(typeof(jthis.validationEngine)!='undefined'){jthis.find('form').validationEngine('attach',{scrollOffset:parseInt($(window).height()/2)});}
if(typeof(jthis.intlTelInput)!='undefined'){jthis.find('input.intl_tel').intlTelInput({initialCountry:'us'}).unbind('countrychange.iti, change.iti').bind('countrychange.iti, change.iti',function(){var jinput=$(this);jinput.val(jinput.intlTelInput("getNumber"));});}
if(typeof(jthis.ajaxLink)!='undefined')
jthis.find('.ajax_link').ajaxLink();if(typeof(jthis.ajaxForm)!='undefined')
jthis.find('form.ajax_form,form.ajax_submit_form').ajaxForm().find('input.target_blank').unbind('.ajaxForm').bind('click.ajaxForm',function(){var jthis=$(this);var jform=jthis.closest('form');var btarget=jform.attr('target');jform.attr('target','_blank');setTimeout(function(){if(btarget)
jform.attr('target',btarget);else
jform.removeAttr('target');jform.data('submitting',false)},100);});if(typeof(jthis.ajaxContentLink)!='undefined')
jthis.find('.ajax_content').ajaxContentLink();if(typeof(jthis.ajaxPaging)!='undefined')
jthis.find('.ajax_paging a,.ajax_paging select').ajaxPaging();if(typeof(jthis.fcToggle)!='undefined')
jthis.find(".fc_title,.fc_content[data-parent]").fcToggle();if(typeof(jthis.ccFormat)!='undefined')
jthis.find('.cc_format').ccFormat();if(typeof(jthis.tabby)!='undefined')
jthis.find('.tabby').tabby();if(typeof(jthis.stackedRows)!='undefined')
jthis.find('.stackedrows').stackedRows();if(typeof(jthis.fancybox)!='undefined')
jthis.find(".fancybox").fancybox({'transitionIn':'none','transitionOut':'none','overlayOpacity':0.7,'overlayColor':'black','cyclic':true});jthis.find('input[type="file"]').unbind('change.FI').bind('change.FI',function(){var jfile=$(this);var files=this.files;var filesize=0;if(!jfile.is(':visible')||!files||!files.length||typeof(CI_MAX_UPLOAD_SIZE)=='undefined')
return;for(var i=0;i<files.length;i++){if(files[i]&&files[i].size>0)
filesize+=files[i].size;}
if(filesize>0&&filesize>CI_MAX_UPLOAD_SIZE)
alert('Files size of '+Math.round(filesize/1024/1024)+' MB is bigger than the upload limit set ('+Math.round(CI_MAX_UPLOAD_SIZE/1024/1024)+' MB)! \n'+'Please select a smaller file to upload or less files in case of multiple files selected.');});jthis.find(".check_all").unbind('click.FI').bind('click.FI',function(){var jthis=$(this);var checked_status=this.checked;var parent_element="table";if(jthis.attr('alt'))
parent_element=jthis.attr('alt');jthis.closest(parent_element).find("input[type=checkbox]").prop('checked',checked_status);});jthis.find("td > a.fc_title").each(function(){var jgroup=$(this);jgroup.closest('tr').find('input[type=checkbox]').unbind('click.FI').bind('click.FI',function(){var jthis=$(this);var checked_status=this.checked;var parent_element="table";if(jthis.attr('alt'))
parent_element=jthis.attr('alt');jthis.parents(parent_element).find(jgroup.attr('data-target')).find('input[type=checkbox]').prop('checked',checked_status);});});jthis.find('td.link').unbind('click.FI').bind('click.FI',function(e){if(e.ctrlKey)
return;if(typeof(e.clientX)!='undefined')
$(this).find('a').first().click();});jthis.find(".auto_submit").unbind('change.FI').bind('change.FI',function(){var jinput=$(this);if(jinput.attr('form'))
$('#'+jinput.attr('form')).submit();else
jinput.closest('form').submit();});jthis.find(".tooltip").each(function(){var jthis=$(this);if(!jthis.find('.close:first').size())
jthis.prepend('<span class="close" style="float:right;" onclick="$(this).parent().showHide();">&times;</span>');});if(typeof(jthis.tipsy)!='undefined'){var jthis=$(this);var fancybox=jthis.closest('#fancybox-content');var zindex;if(fancybox&&fancybox.length)
zindex=fancybox.css('z-index');jthis.find('table td[title]').tipsy({delayIn:100,html:true,gravity:'w',zindex:zindex});jthis.find('.tip,table a[title]').tipsy({delayIn:100,html:true,zindex:zindex});jthis.find('form input[type=file][title]').tipsy({delayIn:100,trigger:'hover',gravity:'w',zindex:zindex});jthis.find('form input[title],form textarea[title],form select[title]').tipsy({trigger:'focus',gravity:'w',zindex:zindex});}
jthis.find('input.auto').each(function(){$(this).unbind('keyup.FI').bind('keyup.FI',function(){var jthis=$(this);var nwidth=jthis.val().length*(jthis.css('font-size')?parseFloat(jthis.css('font-size'))-7:8);if(nwidth>700)
nwidth=700;if(nwidth>150&&jthis.width()<nwidth)
jthis.width(nwidth);}).keyup();});jthis.find('.combobox').each(function(){var jinput=$(this).find('input');var jselect=$(this).find('select');jselect.change(function(){jinput.val(this.value).trigger('keyup').trigger('change');});});if(typeof(jthis.datepicker)!='undefined'){jthis.find("input.calendar").each(function(){var jthis=$(this);var dateformat='';if(jthis.data('datepicker'))
return true;if(jthis.is('.timestamp')&&!jthis.datepicker.DPGlobal){var d=new Date();dateformat='m/dd/yy '+((d.getHours()==0?12:d.getHours()>12?d.getHours()-12:d.getHours()))+':'+d.getMinutes()+' '+(d.getHours()>=12?"'PM'":"'AM'");}else if(jthis.is('.time')&&!jthis.datepicker.DPGlobal){var d=new Date();dateformat=((d.getHours()==0?12:d.getHours()>12?d.getHours()-12:d.getHours()))+':'+d.getMinutes()+' '+(d.getHours()>=12?"'PM'":"'AM'");}else{dateformat='m/dd/yy';}
jthis.datepicker({showAnim:'fadeIn',dateFormat:dateformat,constrainInput:false}).after($("<a class='show_calendar_picker'>&nbsp;</a>").click(function(){jthis.focus();}));});}
if(typeof(jthis.passy)!='undefined'){var ignore=false;var jfields=jthis.find("input.passy:not([type=hidden])");jfields.each(function(i){if(ignore){ignore=false;return true;}
if(typeof(jfields[i+1])!='undefined'&&jfields[i+1].name.indexOf('re_')===0){$([this,jfields[i+1]]).passy('ui');ignore=true;return true;}
$(this).passy('ui');});}
if(typeof(jthis.tabs)!='undefined'){jthis.find(".ui-tabs").tabs();}
if(typeof(jthis.ColorPicker)!='undefined'||typeof(jthis.spectrum)!='undefined'){jthis.find("input.color").each(function(){var jthis=$(this);if(jthis.data('colorpickerID')||jthis.data('spectrum.id')!=undefined)
return true;if(typeof(jthis.spectrum)!='undefined'){var colorChangeTimeout;jthis.spectrum({showAlpha:true,showInput:true,showInitial:true,allowEmpty:true,showButtons:false,clickoutFiresChange:!jthis.is('.flat'),hideAfterPaletteSelect:true,showPalette:true,palette:[],maxSelectionSize:10,localStorageKey:"spectrum.fi",preferredFormat:"hexd",flat:jthis.is('.flat'),color:(jthis.val()?jthis.val():jthis.attr('placeholder')),move:function(color){jthis.val((color?color.toRgbString():''));clearTimeout(colorChangeTimeout);colorChangeTimeout=setTimeout(function(){jthis.trigger('change');},500);}});return true;}
jthis.ColorPicker({onBeforeShow:function(){$(this).ColorPickerSetColor(this.value);}}).after($("<a class='show_color_picker'>&nbsp;</a>").click(function(){$(this).parent().find('input').focus();return false;}));});}
jthis.find(".search_input").each(function(){var jthis=$(this);var jclear=jthis.parent().find('.clear_search_input');if(!jclear.length){jclear=$('<a class="clear_search_input" '+'style="'+(jthis.val()==''?'display:none;':'')+'">&nbsp;</a>').click(function(){jthis.val('').closest('form').submit();jclear.hide();});jthis.after(jclear);}
jthis.unbind('keyup.FI, blur.FI').bind('keyup.FI, blur.FI',function(){if(jthis.val()!='')jclear.css('display','inline-block');else jclear.hide();});jthis.trigger('keyup');});if(typeof(jthis.filePreview)!='undefined')
jthis.find('input[type=file].preview').filePreview();if(typeof(CKEDITOR)!='undefined'){jthis.find('.editor').each(function(){var jthis=$(this);var inline=jthis.is('.inline');var width=jthis.outerWidth();if(typeof(CKEDITOR.instances[jthis.attr('id')])!='undefined')
delete CKEDITOR.instances[jthis.attr('id')];if(typeof(CKEDITOR.instances[jthis.attr('name')])!='undefined')
delete CKEDITOR.instances[jthis.attr('name')];CKEDITOR[(inline?'inline':'replace')](this,{startupMode:(jthis.is('.source')?'source':'wysiwyg'),toolbar:(jthis.is('.simple')?'simple':'full'),height:(inline||jthis.is('.simple')?'150px':'300px'),on:{instanceReady:function(ev){if(inline&&width>20)
jthis.parent().find('.cke_textarea_inline').outerWidth(width);if(typeof(jthis.tipsy)!='undefined')
jthis.parent().find('.cke_toolbox a[title]').tipsy({delayIn:100,html:true});}}});});}
if(typeof(jthis.froalaEditor)!='undefined'){jthis.find('.editor').each(function(){var jthis=$(this);var inline=jthis.is('.inline');var width=jthis.outerWidth();var placeholder=jthis.attr('placeholder');var cssfiles=[];var buttons=[(!inline?'fullscreen':''),'bold','italic','underline','strikeThrough','subscript','superscript','|','paragraphFormat','fontFamily','fontSize','align','color','|','formatOL','formatUL','outdent','indent','quote','|','insertLink','anchor','insertImage','insertVideo','insertTable','insertHR',(!inline?'specialCharacters':''),(!inline?'emoticons':''),'fontAwesome','contentCodes','|','undo','redo','|','clearFormatting','html',(!inline?'help':''),(!inline?'contentHistory':'')];if(jthis.is('.simple'))
buttons=[(!inline?'fullscreen':''),'bold','italic','underline','strikeThrough','|','paragraphFormat','fontFamily','fontSize','align','color','|',(!inline?'formatOL':''),(!inline?'formatUL':''),'insertLink',(!inline?'anchor':''),'insertImage',(!inline?'specialCharacters':''),(!inline?'emoticons':''),'fontAwesome','contentCodes','|','undo','redo','|','html','contentHistory'];var videoparams={};var imageparams={trough:'froala',mode:'add',currentpath:'/static/sitefiles/images/'};imageparams[CI_CSRF_TOKEN_NAME]=CI_CSRF_TOKEN_VALUE;$.extend(videoparams,imageparams);videoparams.currentpath='/static/sitefiles/media/';if(typeof(CI_SITE_URL)!='undefined'){$('link').each(function(){if(this.href&&this.href.indexOf(CI_SITE_URL)!=-1)
cssfiles.push(this.href);});}
jthis.froalaEditor({iframe:true,iframeStyleFiles:cssfiles,key:'wA6C6C5F5hB3D3B11D9C3B4A3F3D3H3cODOb1HLEBFZOTGHW==',toolbarButtons:buttons,toolbarButtonsMD:buttons,toolbarButtonsSM:buttons,toolbarButtonsXS:buttons,charCounterCount:false,codeMirror:false,contentHistory:true,imageDefaultWidth:0,toolbarStickyOffset:($('body>.header>.nav').is(':visible')?30:0),width:(inline&&width>20?width:'auto'),heightMin:(inline?80:130),heightMax:($('html').is('.in_iframe')?500:0),imageUploadURL:(CI_SITE_URL?CI_SITE_URL:'')+'ckeditor/filemanager/connectors/php/filemanager.php',imageCORSProxy:false,imageUploadParam:'newfile[]',imageUploadParams:imageparams,videoUploadURL:(CI_SITE_URL?CI_SITE_URL:'')+'ckeditor/filemanager/connectors/php/filemanager.php',videoUploadParam:'newfile[]',videoUploadParams:videoparams,pluginsEnabled:['align','codeView','colors','colorsMod','draggable','emoticons','entities','file','fontFamily','fontSize','forms','fullscreen','help','image','inlineStyle','lineBreaker','link','lists','paragraphFormat','paragraphStyle','quickInsert','quote','specialCharacters','table','url','video','wordPaste','codeViewMod','formatMod','popupMod','insertLinkMod','anchor','imageMod','contentCodes','fontAwesome','contentHistoryPopup',(!inline?'contentHistory':''),'fileManager'],htmlRemoveTags:[],htmlExecuteScripts:false,htmlAllowedAttrs:$.merge($.FroalaEditor.DEFAULTS.htmlAllowedAttrs,["onclick"]),htmlDoNotWrapTags:['script','style','span','img'],htmlAllowedEmptyTags:['textarea','a','iframe','object','video','style','script','i','span'],tableEditButtons:['tableHeader','tableRemove','|','tableRows','tableColumns','-','tableCells','tableCellBackground','tableCellVerticalAlign','tableCellHorizontalAlign'],fontFamily:$.extend({},{"'Arial', 'Helvetica', 'sans-serif'":'Arial',"'Arial Black', 'Gadget', 'sans-serif'":'Arial Black',"'Helvetica', 'sans-serif'":'Helvetica',"'Comic Sans MS', 'cursive', 'sans-serif'":'Comic Sans MS',"'Impact', 'Charcoal', 'sans-serif'":'Impact',"'Lucida Sans Unicode', 'Lucida Grande', 'sans-serif'":'Lucida Sans Unicode',"'Tahoma', 'Geneva', 'sans-serif'":'Tahoma',"'Trebuchet MS', 'Helvetica', 'sans-serif'":'Trebuchet MS',"'Verdana', 'Geneva', 'sans-serif'":'Verdana',"'Georgia', 'serif'":'Georgia',"'Palatino Linotype', 'Book Antiqua', 'Palatino', 'serif'":'Palatino Linotype',"'Times New Roman', 'Times', 'serif'":'Times New Roman',"'Courier', 'monospace'":'Courier',"'Courier New', 'Courier', 'monospace'":'Courier New',"'Lucida Console', 'Monaco', 'monospace'":'Lucida Console',"'monospace'":'Monospace'},(typeof(EDITOR_FONTS)!='undefined'?EDITOR_FONTS:{})),linkList:[{text:'Google',href:'https://google.com'},{text:'Bing',href:'https://bing.com'},{text:'Facebook',href:'https://facebook.com'}],linkStyles:{'button':'Button','fa-rotate-90':'Rotate 90','fa-rotate-180':'Rotate 180','fa-rotate-270':'Rotate 270','fa-flip-horizontal':'Flip Horizontal','fa-flip-vertical':'Flip Vertical','fa-spin':'Spinning'},imageStyles:{'fa-round':'Rounded','fa-border':'Bordered','fa-rotate-90':'Rotate 90','fa-rotate-180':'Rotate 180','fa-rotate-270':'Rotate 270','fa-flip-horizontal':'Flip Horizontal','fa-flip-vertical':'Flip Vertical','fa-spin':'Spinning'},toolbarInline:inline,toolbarVisibleWithoutSelection:inline,placeholderText:(placeholder?placeholder:'Type Something')}).on('froalaEditor.image.error,froalaEditor.video.error',function(e,editor,error,response){try{var jresponse=jQuery.parseJSON(response);if(jresponse.Error)
response=jresponse.Error;}catch(e){}
if(!response&&error)
response=error.message;if(response)
$('.fr-image-progress-bar-layer.fr-active h3,.fr-video-progress-bar-layer.fr-active h3').append('<br /><span class="red">'+response+"</span>");});});}
jthis.find('label').each(function(){var jlabel=$(this);var jinput=jlabel.next();if(!jinput.is('input'))
jinput=jinput.find('input')
if(!jinput.length||jinput.attr('aria-label'))
return;jinput.attr('aria-label',jlabel.text());});if($.FI.plugins.length>0){for(var i=0;i<$.FI.plugins.length;i++){if(!$.FI.plugins[i].selector){jthis[$.FI.plugins[i].plugin]();continue;}
if(typeof($.FI.plugins[i].plugin)=='function'){jthis.find($.FI.plugins[i].selector).each($.FI.plugins[i].plugin);}else if(typeof($.fn[$.FI.plugins[i].plugin])!='undefined'){jthis.find($.FI.plugins[i].selector)[$.FI.plugins[i].plugin]();}}}
if($.FI.functions.length>0){for(var i=0;i<$.FI.functions.length;i++){jthis.each($.FI.functions[i]);}}
if($.FI.readys.length>0){for(var i=0;i<$.FI.readys.length;i++){jthis.each($.FI.readys[i]);}
$.FI.readys=new Array();}
if(typeof(FB)!='undefined'&&FB.XFBML&&FB.XFBML.parse)
try{FB.XFBML.parse(jthis[0]);}catch(e){}
if(typeof(DISQUS)!='undefined'&&DISQUS.reset)
try{DISQUS.reset({reload:true});}catch(e){}
if(typeof(gapi)!='undefined'&&gapi.plusone&&gapi.plusone.go)
try{gapi.plusone.go();}catch(e){}
if(typeof(twttr)!='undefined'&&twttr.widgets&&twttr.widgets.load)
try{twttr.widgets.load();}catch(e){}});},showHide:function(speed,callback,showHide){if(typeof(speed)=='boolean'){showHide=speed;speed='fast';}
if(typeof(speed)=='function'){callback=speed;speed='fast';}
if(typeof(speed)=='undefined')
speed='fast';return this.each(function(){var jthis=$(this);var jwindow=$(window);var inline=(jthis.css('display')=='inline'||jthis.is('.inline'));if(jthis.css('display')=='none'&&(typeof(showHide)=='undefined'||showHide==true))
{jthis.stop().css((inline?{'opacity':'','display':'inline'}:{'opacity':'','height':''})).animate((inline?{'opacity':'show'}:{'opacity':'show','height':'show'}),speed,function(){jthis.css({'overflow':''});if(typeof(callback)=='function')
callback();var jthisoffset=jthis.offset();if((jthis.is('.auto_scroll_to')&&((jthisoffset&&jthisoffset.top&&jwindow.scrollTop()>jthisoffset.top)||(jthisoffset&&jthisoffset.top&&jthisoffset.top>jwindow.scrollTop()+jwindow.height()-50)))||(jthisoffset&&jthis.is('.scroll_to')))
{$('html,body').animate({scrollTop:jthisoffset.top-100},50,'linear');}});}else if(jthis.css('display')!='none'&&(typeof(showHide)=='undefined'||showHide==false))
{jthis.closest('form').find('div.formError').fadeOut('fast',function(){$(this).remove();});jthis.stop().css((inline?{'opacity':''}:{'opacity':'','height':''})).animate((inline?{'opacity':"hide"}:{'opacity':"hide",'height':"hide"}),(inline?0:speed),function(){if(typeof(callback)=='function')
callback();});}});},redirectSubmit:function(action,target){return this.each(function(){var jform=$(this);var baction=jform.attr('action');var btarget=jform.attr('target');jform.attr('action',action);jform.attr('target',target);jform.submit();jform.removeData('submitting');if(!baction)
jform.removeAttr('action');else
jform.attr('action',baction);if(!btarget)
jform.removeAttr('target');else
jform.attr('target',btarget);return false;});}});(function(){if(top!==self&&typeof(top.postMessage)!='undefined'){try{top.location.href.replace('#','#');}catch(e){var lastHeight=document.body.clientHeight,newHeight;(function run(){newHeight=document.body.clientHeight;if(lastHeight!=newHeight)
top.postMessage(newHeight+':iframeheight','*');lastHeight=newHeight;setTimeout(run,250);})();}}
$(document).delegate('form','submit',function(){var jform=$(this);if(jform.data('submitting'))
return false;jform.data('submitting',true);});window.sessionTimeout=setTimeout(function(){var msg='Your session timed out.';if(typeof($.loading)=='undefined'){if(confirm(msg+' Refresh?'))window.location.reload();return;}
$.FI.toast('<span>'+msg+' <a href="javascript:window.location.reload();">Refresh</a></span>','','');},18000*1000);})();;;(function($){var L=$.loading=function(show,opts){return $('body').loading(show,opts,true);};$.fn.loading=function(show,opts,page){opts=toOpts(show,opts);var base=page?$.extend(true,{},L,L.pageOptions):L;return this.each(function(){var $el=$(this),l=$.extend(true,{},base,$.metadata?$el.metadata():null,opts);if(typeof l.onAjax=="boolean"){L.setAjax.call($el,l);}else{L.toggle.call($el,l);}});};var fixed={position:'fixed'};var watchingAjax=false;$.extend(L,{version:"1.6.4",align:'top-left',pulse:'working giveup',mask:false,img:null,element:null,text:'Loading...',onAjax:undefined,delay:0,max:0,classname:'loading',imgClass:'loading-img',elementClass:'loading-element',maskClass:'loading-mask',css:{position:'absolute',whiteSpace:'nowrap',zIndex:999999},maskCss:{position:'absolute',opacity:.15,background:'#333',zIndex:101,display:'block',cursor:'wait'},cloneEvents:true,pageOptions:{page:true,align:'top-center',css:fixed,maskCss:fixed},html:'<div></div>',maskHtml:'<div></div>',maskedClass:'loading-masked',maskEvents:'mousedown mouseup keydown keypress',resizeEvents:'resize',working:{time:10000,text:'Still working...',run:function(l){var w=l.working,self=this;w.timeout=setTimeout(function(){self.height('auto').width('auto').text(l.text=w.text);l.place.call(self,l);},w.time);}},error:{time:100000,text:'Task takes longer than usual...',classname:'loading-error',run:function(l){var e=l.error,self=this;e.timeout=setTimeout(function(){self.height('auto').width('auto').text(l.text=e.text).addClass(e.classname);l.place.call(self,l);},e.time);}},giveup:{time:100000,run:function(l){var g=l.giveup,self=this;g.timeout=setTimeout(function(){self.hide();},g.time);}},fade:{time:800,speed:'slow',run:function(l){var f=l.fade,s=f.speed,self=this;f.interval=setInterval(function(){self.fadeOut(s).fadeIn(s);},f.time);}},ellipsis:{time:300,run:function(l){var e=l.ellipsis,self=this;e.interval=setInterval(function(){var et=self.text(),t=l.text,i=dotIndex(t);self.text((et.length-i)<3?et+'.':t.substring(0,i));},e.time);function dotIndex(t){var x=t.indexOf('.');return x<0?t.length:x;}}},type:{time:100,run:function(l){var t=l.type,self=this;t.interval=setInterval(function(){var e=self.text(),el=e.length,txt=l.text;self.text(el==txt.length?txt.charAt(0):txt.substring(0,el+1));},t.time);}},toggle:function(l){var old=this.data('loading'+(l.onAjax?'Ajax':''));if(old){if(l.show!==true)old.off.call(this,old,l);}else{if(l.show!==false)l.on.call(this,l);}},setAjax:function(l){if(l.onAjax){if(watchingAjax)return;var self=this,count=0,A=l.ajax={start:function(){if(!count++)l.on.call(self,l);},stop:function(){if(!--count)l.off.call(self,l,l);}};$(document).bind('ajaxStart.loading',A.start).bind('ajaxStop.loading',A.stop);watchingAjax=true;}else{$(document).unbind('ajaxStart.loading ajaxStop.loading');watchingAjax=false;}},on:function(l,force){var p=l.parent=this.data('loading'+(l.onAjax?'Ajax':''),l);if(l.max)l.maxout=setTimeout(function(){l.off.call(p,l,l);},l.max);if(l.delay&&!force){return l.timeout=setTimeout(function(){delete l.timeout;l.on.call(p,l,true);},l.delay);}
if(l.mask)l.mask=l.createMask.call(p,l);l.display=l.create.call(p,l);if(l.img){l.initImg.call(p,l);}else if(l.element){l.initElement.call(p,l);}else{l.init.call(p,l);}
p.trigger('loadingStart',[l]);},initImg:function(l){var self=this;l.imgElement=$('<img src="'+l.img+'"/>').bind('load',function(){l.init.call(self,l);});l.display.addClass(l.imgClass).append(l.imgElement);},initElement:function(l){l.element=$(l.element).clone(l.cloneEvents).show();l.display.addClass(l.elementClass).append(l.element);l.init.call(this,l);},init:function(l){l.place.call(l.display,l);if(l.pulse)l.initPulse.call(this,l);},initPulse:function(l){$.each(l.pulse.split(' '),function(){l[this].run.call(l.display,l);});},create:function(l){var el=$(l.html).addClass(l.classname).css(l.css).appendTo(this);if(l.text&&!l.img&&!l.element)el.text(l.originalText=l.text);$(window).bind(l.resizeEvents,l.resizer=function(){l.resize(l);});return el;},resize:function(l){l.parent.box=null;if(l.mask)l.mask.hide();l.place.call(l.display.hide(),l);if(l.mask)l.mask.show().css(l.parent.box);},createMask:function(l){var box=l.measure.call(this.addClass(l.maskedClass),l);l.handler=function(e){return l.maskHandler(e,l);};$(document).bind(l.maskEvents,l.handler);return $(l.maskHtml).addClass(l.maskClass).css(box).css(l.maskCss).appendTo(this);},maskHandler:function(e,l){var $els=$(e.target).parents().andSelf();if($els.filter('.'+l.classname).length!=0)return true;return!l.page&&$els.filter('.'+l.maskedClass).length==0;},place:function(l){var box=l.align,v='top',h='left';if(typeof box=="object"){box=$.extend(l.calc.call(this,v,h,l),box);}else{if(box!='top-left'){var s=box.split('-');if(s.length==1){v=h=s[0];}else{v=s[0];h=s[1];}}
if(!this.hasClass(v))this.addClass(v);if(!this.hasClass(h))this.addClass(h);box=l.calc.call(this,v,h,l);}
this.show().css(l.box=box);},calc:function(v,h,l){var box=$.extend({},l.measure.call(l.parent,l)),H=this.height(),W=this.width();if(v!='top'){var d=box.height-H;if(v=='center'){d/=2;}else if(v!='bottom'){d=0;}else{d-=css(this,'paddingTop')+css(this,'paddingBottom');}
box.top+=d;}
if(h!='left'){var d=box.width-W;if(h=='center'){d/=2;}else if(h!='right'){d=0;}else{d-=css(this,'paddingLeft')+css(this,'paddingRight');}
box.left+=d;}
box.height=H;box.width=W;return box;},measure:function(l){return this.box||(this.box=l.page?l.pageBox(l):l.elementBox(this,l));},elementBox:function(e,l){if(e.css('position')=='absolute'){var box={top:0,left:0};}else{var box=e.position();box.top+=css(e,'marginTop');box.left+=css(e,'marginLeft');}
box.height=e.outerHeight();box.width=e.outerWidth();return box;},pageBox:function(l){var full=l.css.position!='fixed';return{top:0,left:0,height:get(full,'Height'),width:get(full,'Width')};function get(full,side){var doc=document;if(full){var s=side.toLowerCase(),d=$(doc)[s](),w=$(window)[s]();return d-css($(doc.body),'marginTop')>w?d:w;}
var c='client'+side;return Math.max(doc.documentElement[c],doc.body[c]);}},off:function(old,l){this.data('loading'+(l.onAjax?'Ajax':''),null);if(old.maxout)clearTimeout(old.maxout);if(old.timeout)return clearTimeout(old.timeout);if(old.pulse)old.stopPulse.call(this,old,l);if(old.originalText)old.text=old.originalText;if(old.mask)old.stopMask.call(this,old,l);$(window).unbind(old.resizeEvents,old.resizer);if(old.display)old.display.remove();if(old.parent)old.parent.trigger('loadingEnd',[old]);},stopPulse:function(old,l){$.each(old.pulse.split(' '),function(){var p=old[this];if(p.end)p.end.call(l.display,old,l);if(p.interval)clearInterval(p.interval);if(p.timeout)clearTimeout(p.timeout);});},stopMask:function(old,l){this.removeClass(l.maskedClass);$(document).unbind(old.maskEvents,old.handler);old.mask.remove();}});function toOpts(s,l){if(l===undefined){l=(typeof s=="boolean")?{show:s}:s;}else{l.show=s;}
if(l&&(l.img||l.element)&&!l.pulse)l.pulse=false;if(l&&l.onAjax!==undefined&&l.show===undefined)l.show=false;return l;}
function css(el,prop){var val=el.css(prop);return val=='auto'?0:parseFloat(val,10);}})(jQuery);;(function($){var appendTo=document.body;function Tipsy(element,options){this.$element=$(element);this.options=options;this.enabled=true;this.fixTitle();}
Tipsy.prototype={show:function(){var title=this.getTitle();if(title&&this.enabled){var $tip=this.tip();$tip.find('.tipsy-inner')[this.options.html?'html':'text'](title);$tip[0].className='tipsy';$tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).appendTo(appendTo);if(this.options.zindex)
$tip.css({'z-index':this.options.zindex});this.update();if(this.options.fade){$tip.stop().css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:this.options.opacity});}else{$tip.css({visibility:'visible',opacity:this.options.opacity});}
if(this.options.closeButton)
$tip.find('.tipsy-close-button a').mousedown(function(e){$tip.find('iframe').blur();$tip.hide();e.preventDefault();});}},update:function(){if(this.enabled){var $tip=this.tip();$tip[0].className='tipsy'+
(this.options.additionalClassName!=''?' '+this.options.additionalClassName:'');var pos=$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;var gravity=(typeof this.options.gravity=='function')?this.options.gravity.call(this.$element[0]):this.options.gravity;if(pos.top==0)
pos.top=$tip.offset().top;if(pos.left==0)
pos.left=$tip.offset().left;var tp;switch(gravity.charAt(0)){case'n':tp={top:pos.top+pos.height+this.options.offset,left:pos.left+pos.width/2-actualWidth/2};break;case's':tp={top:pos.top-actualHeight-this.options.offset,left:pos.left+pos.width/2-actualWidth/2};break;case'e':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth-this.options.offset};break;case'w':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width+this.options.offset};break;}
if(gravity.length==2){if(gravity.charAt(1)=='w'){tp.left=pos.left+pos.width/2-15;}else{tp.left=pos.left+pos.width/2-actualWidth+15;}}
if($tip.is('.tipsy-big')&&gravity.charAt(0)=='n'){var maxWidth=$(document).scrollLeft()+$(window).width();if(tp.left+actualWidth>maxWidth)
tp.left=maxWidth-actualWidth-
(parseInt($tip.css('padding-right'))+
parseInt($tip.find('.tipsy-outer').css('padding-right')));try{if(window.self!==window.top){var maxHeight=$(document).scrollTop()+$(window).height();if(tp.top+actualHeight>maxHeight)
tp.top=maxHeight-actualHeight-
(parseInt($tip.css('padding-bottom'))+
parseInt($tip.find('.tipsy-outer').css('padding-bottom')));}}catch(e){}}
if($tip.is('.tipsy-fixed')||this.options.fixed){tp.position='fixed';tp.top-=$(document).scrollTop();}
if(tp.left<0)
tp.left=0;if(tp.top<0)
tp.top=0;$tip.css(tp).addClass('tipsy-'+gravity).data('tipsyOwner',this.$element);}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){$(this).remove();});}else{this.tip().remove();}},fixTitle:function(){var $e=this.$element;if($e.attr('title')||typeof($e.attr('original-title'))!='string'){$e.attr('original-title',$e.attr('title')||'').removeAttr('title');}},getTitle:function(){var title,$e=this.$element,o=this.options;this.fixTitle();var title,o=this.options;if(typeof o.title=='string'){title=$e.attr(o.title=='title'?'original-title':o.title);}else if(typeof o.title=='function'){title=o.title.call($e[0]);}
title=(''+title).replace(/(^\s*|\s*$)/,"");return title||o.fallback;},tip:function(){if(!this.$tip){this.$tip=$('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div>'+'<div class="tipsy-outer">'+
(this.options.closeButton?'<div class="tipsy-close-button">'+'<a href="javascript://">'+'<span>x</span>'+'</a>'+'</div>':'')+'<div class="tipsy-inner"></div>'+'</div>');}
return this.$tip;},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}},enable:function(){this.enabled=true;},disable:function(){this.enabled=false;},toggleEnabled:function(){this.enabled=!this.enabled;}};$.fn.tipsy=function(options){if(options===true){return this.data('tipsy');}else if(typeof options=='string'){var tipsy=this.data('tipsy');if(tipsy)tipsy[options]();return this;}
options=$.extend({},$.fn.tipsy.defaults,options);function get(ele){var tipsy=$.data(ele,'tipsy');if(!tipsy){tipsy=new Tipsy(ele,$.fn.tipsy.elementOptions(ele,options));$.data(ele,'tipsy',tipsy);}
return tipsy;}
function enter(){var tipsy=get(this);tipsy.hoverState='in';if(options.delayIn==0){tipsy.show();}else{tipsy.fixTitle();setTimeout(function(){if(tipsy.hoverState=='in')tipsy.show();},options.delayIn);}};function leave(){var tipsy=get(this);tipsy.hoverState='out';if(options.delayOut==0){tipsy.hide();}else{setTimeout(function(){if(tipsy.hoverState=='out')tipsy.hide();},options.delayOut);}};if(!options.live)this.each(function(){get(this);});if(options.trigger!='manual'){var binder=options.live?'live':'bind',eventIn=options.trigger=='hover'?'mouseenter':'focus',eventOut=options.trigger=='hover'?'mouseleave':'blur';this[binder](eventIn,enter)[binder](eventOut,leave);}
return this;};$.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:false,fallback:'',additionalClassName:'',gravity:'n',html:false,live:false,fixed:false,offset:0,opacity:0.8,title:'title',trigger:'hover',closeButton:false,zindex:0};$.fn.tipsy.elementOptions=function(ele,options){var $element=$(ele);options=$.extend({},options);if($element.attr('tipsy-class'))
options.additionalClassName=$element.attr('tipsy-class');if($element.attr('tipsy-gravity'))
options.gravity=$element.attr('tipsy-gravity');if($element.attr('tipsy-zindex'))
options.zindex=$element.attr('tipsy-zindex');if(window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match(/iP(ad|hone)/i)){if($element.is('input'))
options.delayIn=1000;}
return $.metadata?$.extend({},options,$element.metadata()):options;};$.fn.tipsy.autoNS=function(){return $(this).offset().top>($(document).scrollTop()+$(window).height()/2)?'s':'n';};$.fn.tipsy.autoWE=function(){return $(this).offset().left>($(document).scrollLeft()+$(window).width()/2)?'e':'w';};})(jQuery);;$.fn.ajaxLink=function(){$(this).unbind('click.ajaxlinks').bind('click.ajaxlinks',function(e){if(e.ctrlKey)
return;var jthis=$(this);var url=jthis.attr('href');var dataparser=window[jthis.attr('data-parser')];var isconfirm=jthis.is('.confirm');$.ajax({url:url,type:(isconfirm?'POST':'GET'),data:(isconfirm?'confirmed=1&'+CI_CSRF_TOKEN_NAME+'='+CI_CSRF_TOKEN_VALUE:null),complete:function(xhr){var data=xhr.responseText;if(typeof(dataparser)=='function')
data=dataparser(data);if(data)$.FI.toast(data);}});return false;});};$.fn.ajaxPaging=function(){$(this).each(function(){var tagName=this.tagName.toLowerCase();$(this).unbind((tagName=='select'?'change':'click')+'.ajaxpaging').bind((tagName=='select'?'change':'click')+'.ajaxpaging',function(e){if(tagName!='select'&&e.ctrlKey)
return;var jthis=$(this);var contentholder=$(this).closest('.paging').parent();var url=jthis.attr('href');var scrollto=jthis.attr('data-scroll-target');if(tagName=='select')
url=jthis.attr('data-href')+'/0/'+jthis.val();if(contentholder.children().size()<=1)
contentholder=contentholder.parent();$.get(url,function(data){var jdata=(data&&data.trim()[0]=='<'?$(data):$('<p>'+data+'</p>'));if(contentholder.is('form')&&jdata.first().is('form'))
contentholder=contentholder.parent();if(typeof($.FroalaEditor)!='undefined')
contentholder.find('.editor').froalaEditor('destroy');contentholder.html(jdata).FI();if(typeof($.mobile)!='undefined')
contentholder.closest('div[data-role*="page"]').page('destroy').page();var contentoffset=contentholder.offset();var jwindow=$(window);if(scrollto)
contentoffset=contentholder.find(scrollto).offset();if((contentoffset&&contentoffset.top&&jwindow.scrollTop()>contentoffset.top)||(contentoffset&&contentoffset.top&&contentoffset.top>jwindow.scrollTop()+jwindow.height()-50))
{$('html,body').animate({scrollTop:contentoffset.top-100},50,'linear');}});jthis.blur();return false;});});};$.fn.ajaxContentLink=function(){$(this).unbind('click.ajaxcontentlink').bind('click.ajaxcontentlink',function(e){if(e.ctrlKey)
return;var jthis=$(this);var url=jthis.attr('href');var hash=url.match(/(\#[^#]+$)/);var tooltip=jthis.attr('title')||jthis.attr('original-title')||jthis.attr('value')||jthis.text();var reqheader=new Array();var dataparser=window[jthis.attr('data-parser')];var isconfirm=jthis.is('.confirm');var isblank=(jthis.attr('target')=='_blank'&&jthis.attr('data-target')?true:false);if(typeof(tooltip)=='undefined')
tooltip=jthis.text();if(jthis.attr('data-request-header'))
reqheader=jthis.attr('data-request-header').split(':');if(jthis.attr('data-target')){var target;var method='';var lookup=jthis.attr('data-target-lookup');var scrollto=jthis.attr('data-scroll-target');if(jthis.attr('data-target-method'))
method=jthis.attr('data-target-method');if(jthis.attr('data-target')=='parent')
target=jthis.parent();else if(jthis.attr('data-target')=='self')
target=jthis;else if(method=='closest'||lookup=='closest')
target=$(this).closest(jthis.attr('data-target'));else
target=$(jthis.attr('data-target'));if(!target.length)
return true;if(jthis.attr('data-loaded')){if(method=='after')
target.next().showHide();else if(method=='before')
target.prev().showHide();else if(method=='append')
target.last().showHide();else if(method=='prepend')
target.first().showHide();else
target.showHide();return false;}
if(jthis.attr('data-loading'))
return false;$.ajax({url:url,type:(isconfirm?'POST':'GET'),data:(isconfirm?'confirmed=1&'+CI_CSRF_TOKEN_NAME+'='+CI_CSRF_TOKEN_VALUE:null),beforeSend:function(xhr){if(typeof(reqheader[0])=='undefined')
return;if(typeof(reqheader[1])=='undefined')
reqheader[1]='';xhr.setRequestHeader(reqheader[0],reqheader[1]);},complete:function(xhr){var data=xhr.responseText;if(hash&&!$(hash[1]).is(':visible'))
window.location.hash=hash[1];if(xhr&&xhr.status==201){if(data)$('body').append(data);return;}
if(typeof(dataparser)=='function')
data=dataparser(data);$('body > .tipsy').not('.tipsy-big').remove();jthis.removeAttr('data-loading');if(!data||xhr.status!=200){if(data)$.FI.toast(data);return false;}
var jdata=(data&&data.trim()[0]=='<'?$(data):$('<p>'+data+'</p>'));if(jdata.length==1&&jdata.is('.tooltip.success,.tooltip.error')){$.FI.toast(jdata.prop('outerHTML'));return false;}
if(typeof($.FroalaEditor)!='undefined'&&(!method||method=='replace'))
target.find('.editor').froalaEditor('destroy');if(jthis.is('.slide')){if(method=='after')
target.after(jdata.css('display','none').showHide());else if(method=='before')
target.before(jdata.css('display','none').showHide());else if(method=='append')
target.append(jdata.css('display','none').showHide());else if(method=='prepend')
target.prepend(jdata.css('display','none').showHide());else if(method=='replace')
target.replaceWith(jdata.css('display','none').showHide());else
target.html(jdata).css('display','none').showHide();}else{if(method=='after')
target.after(jdata);else if(method=='before')
target.before(jdata);else if(method=='append')
target.append(jdata);else if(method=='prepend')
target.prepend(jdata);else if(method=='replace')
target.replaceWith(jdata);else
target.html(jdata);}
jdata.parent().FI();if(typeof($.mobile)!='undefined')
target.closest('div[data-role*="page"]').page('destroy').page();if(!jthis.is('.renew'))
jthis.attr('data-loaded','1');var targetoffset=target.offset();var jwindow=$(window);if(scrollto)
targetoffset=target.find(scrollto).offset();if((targetoffset&&targetoffset.top&&$(window).scrollTop()>targetoffset.top)||(targetoffset&&targetoffset.top&&targetoffset.top>jwindow.scrollTop()+jwindow.height()-50))
{$('html,body').animate({scrollTop:targetoffset.top-100},50,'linear');}
jthis.trigger('ajaxContentReady');if(isconfirm)
$.FI.toast(tooltip+" was successful.",'success');}});jthis.attr('data-loading','true');return isblank;}
if(typeof(jthis.tipsy)=='undefined')
return true;if(jthis.data('tipsy')&&!jthis.is('.renew')){if(jthis.data('tipsy').$tip.is(':visible')){jthis.data('tipsy').$tip.hide();}else{jthis.data('tipsy').$tip.show();jthis.tipsy("update");}
if(jthis.data('tipsy').options.trigger=='hover')
jthis.tipsy("hide").removeData('tipsy').unbind('mouseenter mouseleave');else
return false;}
if(!tooltip||tooltip.indexOf('Loading')==-1)
jthis.attr('title','Loading '+tooltip+' ... &nbsp; &nbsp; &nbsp;');if(typeof(dataparser)!='function'){jthis.tipsy({trigger:'manual',html:true,opacity:1.0,additionalClassName:'tipsy-big',closeButton:true,gravity:'n'});jthis.tipsy("show");if(jthis.data('tipsy').$tip){var parenttipsy=jthis.closest('.tipsy');if(parenttipsy&&parenttipsy.length&&parseInt(parenttipsy.css('z-index'))>parseInt(jthis.data('tipsy').$tip.css('z-index')))
{jthis.data('tipsy').$tip.css({'z-index':parenttipsy.css('z-index')});}
var fancybox=jthis.closest('#fancybox-content');if(fancybox&&fancybox.length){$(document).bind('fancybox-cleanup',function(){jthis.tipsy("hide");});if(parseInt(fancybox.css('z-index'))>parseInt(jthis.data('tipsy').$tip.css('z-index'))){jthis.data('tipsy').$tip.css({'z-index':fancybox.css('z-index')});}}}}
$.ajax({url:url,type:(isconfirm?'POST':'GET'),data:(isconfirm?'confirmed=1&'+CI_CSRF_TOKEN_NAME+'='+CI_CSRF_TOKEN_VALUE:null),beforeSend:function(xhr){if(typeof(reqheader[0])=='undefined')
return;if(typeof(reqheader[1])=='undefined')
reqheader[1]='';xhr.setRequestHeader(reqheader[0],[1]);},complete:function(xhr){var data=xhr.responseText;if(xhr&&xhr.status==201){if(data)$('body').append(data);return;}
if(hash&&!$(hash[1]).is(':visible'))
window.location.hash=hash[1];if(typeof(dataparser)=='function')
data=dataparser(data);if(!data||xhr.status!=200){if(data)$.FI.toast(data);return false;}
var target=jthis.data('tipsy').$tip.find('.tipsy-inner');target.html(data).FI();jthis.tipsy("update").trigger('ajaxContentReady');if(isconfirm)
$.FI.toast(tooltip+" was successful.",'success');}});return isblank;});};$.fn.ajaxLightboxLink=function(){$(this).lightBox({hideDetails:true,disableNavigation:true,ajaxContent:true});};;
/*!
 * jQuery Form Plugin
 * version: 3.36.0-2013.06.16
 * @requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
;(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp)
return this.attr.apply(this,arguments);var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string')
return val;return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if($form.data('submitting'))
return false;if(typeof options=='function'){options={success:options};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var submit_status_timeout;if(typeof(CKEDITOR)!='undefined'){for(var i in CKEDITOR.instances)
CKEDITOR.instances[i].updateElement();}
var soldBeforeSend=options.beforeSend;options.beforeSend=function(xhr){$form.data('submitting',true);document.cookie='frontend_admin='+(top!==self?'1':'')+';path=/';if($form.is('.ajax_submit_form')){xhr.setRequestHeader('X-Requested-With','XMLHttpSubmitRequest');xhr.setRequestHeader('X-Request-No-Layout','true');}
submit_status_timeout=setTimeout(function(){submitStatusShow(xhr);},(hasFileInputs&&fileInputs.val()!=''?1:3000));if(soldBeforeSend)soldBeforeSend.call(xhr,o);}
var soldUploadProgress=options.uploadProgress;options.uploadProgress=function(event,position,total,percentComplete){if(percentComplete>=100)
submitStatusUpdate('Waiting for response ...',percentComplete+'%');else
submitStatusUpdate('Uploading files ...',percentComplete+'%');if(soldUploadProgress)soldUploadProgress.call(event,position,total,percentComplete);}
var soldComplete=options.complete;options.complete=function(xhr){if(xhr.status!=200&&xhr.responseText){if(xhr.status==201)$('body').append(xhr.responseText);else if(typeof($.FI)!='undefined')$.FI.toast(xhr.responseText);else alert(xhr.responseText);}
$form.data('submitting',false);clearTimeout(submit_status_timeout);submitStatusHide();if(soldComplete)soldComplete.call(xhr,status);}
var soldSuccess=options.success;options.success=function(data,status,xhr,form){$form.data('submitting',false);clearTimeout(submit_status_timeout);submitStatusHide();if(soldSuccess)soldSuccess.call(data,status,xhr,form);}
var soldError=options.error;options.error=function(xhr,status,error){$form.data('submitting',false);clearTimeout(submit_status_timeout);submitStatusHide();if(soldError)soldError.call(xhr,status,error);}
function submitStatusShow(xhr){function animateProgressBar(){var status_bar=$('.ajax_submit_form_status_bar span');if(!status_bar.length)
return;status_bar.animate({'left':(status_bar.position().left>1?'0px':'270px')},2000,function(){animateProgressBar();});}
var submit_status=$('.ajax_submit_form_status');if(!submit_status.length){submit_status=$('<div class="ajax_submit_form_status">'+'<div class="ajax_submit_form_status_overlay"></div>'+'<div class="ajax_submit_form_status_content">'+'<div class="ajax_submit_form_status_title"></div>'+'<div class="ajax_submit_form_status_bar"><span></span></div>'+'<div class="ajax_submit_form_status_footer">'+'<div class="button r"><a>Cancel</a></div>'+'</div>'+'</div>'+'</div>').appendTo('body');}
submit_status.find('.ajax_submit_form_status_bar span').width('30px').text('');submit_status.find('.ajax_submit_form_status_title').html('<p>Sending request ...</p>');if(xhr){submit_status.find('.ajax_submit_form_status_footer .button').unbind('click').click(function(){xhr.abort();if(xhr.readyState==4)
submitStatusHide();}).show();}else{submit_status.find('.ajax_submit_form_status_footer .button').unbind('click').hide();}
submit_status.show();animateProgressBar();}
function submitStatusHide(){var submit_status=$('.ajax_submit_form_status');if(!submit_status.length)
return;submit_status.remove();}
function submitStatusUpdate(title,status){if(title){var status_title=$('.ajax_submit_form_status_title');if(status_title.length)
status_title.html('<p>'+title+'</p>');}
if(status){var status_bar=$('.ajax_submit_form_status_bar span');if(status_bar.length)
status_bar.stop().width(status).text(status).css('left','0px');}}
var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';if(typeof($.FroalaEditor)!='undefined')
$(options.target).find('.editor').froalaEditor('destroy');$(options.target)[fn](data).each(oldSuccess,arguments);if(typeof($.FI)!='undefined')$(options.target).FI();});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){if(xhr&&xhr.status==201)
return;var dataparser=window[$form.attr('data-parser')];if(typeof(dataparser)=='function')
data=dataparser(data);var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}
var isFI=(typeof($.FI)!='undefined');if(data&&$form.attr('data-target')){var target;var method='';var scrollto='';$('body > .tipsy').not('.tipsy-big').remove();if($form.attr('data-target-method'))
method=$form.attr('data-target-method');if($form.attr('data-scroll-target'))
scrollto=$form.attr('data-scroll-target');if($form.attr('data-target')=='self')
target=$form;else if($form.attr('data-target')=='parent')
target=$form.parent();else if(method=='closest')
target=$form.closest($form.attr('data-target'));else
target=$($form.attr('data-target'));if(typeof($.FroalaEditor)!='undefined'&&(!method||method=='replace'))
target.find('.editor').froalaEditor('destroy');var jdata=(data&&data.trim()[0]=='<'?$(data):$('<p>'+data+'</p>'));if(method=='after')
target.after(jdata);else if(method=='before')
target.before(jdata);else if(method=='append')
target.append(jdata);else if(method=='prepend')
target.prepend(jdata);else if(method=='replace')
target.replaceWith(jdata);else
target.html(jdata);if(isFI)
jdata.parent().FI();var targetoffset=target.offset();var jwindow=$(window);if(scrollto)
targetoffset=target.find(scrollto).offset();if((targetoffset&&targetoffset.top&&$(window).scrollTop()>targetoffset.top)||(targetoffset&&targetoffset.top&&targetoffset.top>jwindow.scrollTop()+jwindow.height()-50))
{$('html,body').animate({scrollTop:targetoffset.top-100},50,'linear');}}else if(data&&!options.target){if(isFI)$.FI.toast(data);else alert(data);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this);var hasFileInputs=false;fileInputs.each(function(){if(this.value!="")
hasFileInputs=true;});var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=hasFileInputs&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if(hasFileInputs&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++)
elements[k]=null;this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();var ignore_files={};$form.find('input[type=file]').each(function(){var jthis=$(this);if(jthis.data('ignore_files'))
ignore_files[this.name]=jthis.data('ignore_files');});for(var i=0;i<a.length;i++){if(a[i].type=='file'&&typeof(ignore_files)=='object'&&ignore_files[a[i].name]&&ignore_files[a[i].name][a[i].value.name])
continue;formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++)
if(serializedData[i])
formdata.append(serializedData[i][0],serializedData[i][1]);}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position/total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata;if(beforeSend)
beforeSend.call(this,xhr,o);};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp)
el.prop('disabled',false);else
el.removeAttr('disabled');}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n)
$io.attr2('name',id);else
id=n;}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error)
s.error.call(s.context,xhr,e,status);if(g)
$.event.trigger("ajaxError",[xhr,s,e]);if(s.complete)
s.complete.call(s.context,xhr,e);}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action');form.setAttribute('target',id);if(!method){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized')
setTimeout(checkState,50);}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle)
clearTimeout(timeoutHandle);timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');if(io.attachEvent)
io.attachEvent('onload',cb);else
io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut)
return;}
if(io.detachEvent)
io.detachEvent('onload',cb);else
io.removeEventListener('load',cb,false);var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml)
s.dataType='xml';xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success)
s.success.call(s.context,data,'success',xhr);deferred.resolve(xhr.responseText,'success',xhr);if(g)
$.event.trigger("ajaxSuccess",[xhr,s]);}
else if(status){if(errMsg===undefined)
errMsg=xhr.statusText;if(s.error)
s.error.call(s.context,xhr,status,errMsg);deferred.reject(xhr,'error',errMsg);if(g)
$.event.trigger("ajaxError",[xhr,s,errMsg]);}
if(g)
$.event.trigger("ajaxComplete",[xhr,s]);if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete)
s.complete.call(s.context,xhr,status);callbackProcessed=true;if(s.timeout)
clearTimeout(timeoutHandle);setTimeout(function(){if(!s.iframeTarget)
$io.remove();xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error)
$.error('parsererror');}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){if($(this).attr('target')=='_blank')
return true;var fileInputs=$('input[type=file]:enabled',this);var hasFileInputs=false;fileInputs.each(function(){if(this.value!="")
hasFileInputs=true;});var fileAPI=feature.fileapi&&feature.formdata;var shouldUseFrame=hasFileInputs&&!fileAPI;if(shouldUseFrame&&$(this).is('.ajax_submit_form'))
return true;var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements)
elements.push(el);for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements)
elements.push(el);var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements)
elements.push(el);a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array)
$.merge(val,v);else
val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden)))
this.value='';}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug)
return;var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}})(jQuery);;jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};;$.fn.extend({fcToggle:function(){var cookie='';if(typeof($.cookie)!='undefined')
cookie=$.cookie('fcstates');if(cookie==null)
cookie='';function saveState(fcname){if(typeof(fcname)!='string')
return;fcname=fcname.replace(/^fc/,'');if(cookie.indexOf('|'+fcname+'|')==-1)
cookie=cookie+(cookie==''?'|':'')+fcname+'|';else
cookie=cookie.replace('|'+fcname+'|','|');if(cookie=='|')
cookie='';if(typeof($.cookie)!='undefined')
$.cookie('fcstates',cookie,{expires:10,path:'/'});}
function toggle(fc,preload){fc=$(fc);var fccontent=null;if(!preload&&fc.parent().is('.manual'))
return;if(fc.attr('data-target'))
fccontent=$(fc.attr('data-target'));else
fccontent=fc.nextAll('.fc_content');if(fc.is(".expanded")||fc.parent().is(".expanded")){fc.closest('form').find('div.formError').fadeOut('fast',function(){$(this).remove();});fccontent.stop().css({'opacity':'','height':''}).animate({opacity:"hide",height:"hide"},(preload?0:"fast"),function(){if(fc.parent().is(".expanded"))
fc.parent().removeClass("expanded");fc.removeClass("expanded").addClass("colapsed");fccontent.trigger('fctoggle',[0,fccontent]);if(!preload&&fc.attr('name'))
saveState(fc.attr('name'));});}else{fccontent.stop().css({'opacity':'','height':''}).animate({opacity:"show",height:"show"},(preload?0:"fast"),function(){fc.removeClass("colapsed").addClass("expanded");fccontent.trigger('fctoggle',[1,fccontent]);if(!preload&&fc.attr('name'))
saveState(fc.attr('name'));});}}
this.each(function(){var jthis=$(this);if(jthis.is('.fc_content')){var target=jthis.attr('data-parent-target');var parent=(target=='parent'?jthis.parent().find(jthis.attr('data-parent')):(target?$(target).find(jthis.attr('data-parent')):$(jthis.attr('data-parent'))));var parent_value=jthis.attr('data-parent-value').split('|');var neg_parent_value=[];var onchange=function(){var show=false;var selected_value=this.value;if(this.type=='checkbox'||this.type=='radio'){selected_value=new Object();parent.parent().find('input[name="'+this.name+'"]').each(function(i){if(this.checked)
selected_value[i]=this.value;});if($.isEmptyObject(selected_value))
selected_value[0]="";}
if(typeof(selected_value)!='object')
selected_value={0:selected_value};for(var i in selected_value){if($.inArray(selected_value[i],parent_value)!=-1||(neg_parent_value.length>0&&$.inArray(selected_value[i],neg_parent_value)==-1))
show=true;}
var isDisplayNone=(jthis.css('display')=='none');if((show&&!isDisplayNone)||(!show&&isDisplayNone))
return;jthis.showHide(show,function(){jthis.trigger('fctoggle',[show,jthis]);});return false;}
for(var i in parent_value){if(parent_value[i].indexOf('!')!=-1)
neg_parent_value.push(parent_value[i].substring(1));}
parent.change(onchange).change();return true;}
if(this.name&&cookie.indexOf('|'+this.name+'|')!=-1)
toggle(this,true);jthis.unbind('click.fctoggle').bind('click.fctoggle',function(){toggle(this);return false;}).parent().unbind('focus.fctoggle').bind('focus.fctoggle',function(){$(this).keypress(function(event){if(event.which=='13'||event.which=='32'||event.which=='43'||event.which=='45'){toggle($(this).find('.fc_title:first'));return false;}});}).unbind('blur.fctoggle').bind('blur.fctoggle',function(){$(this).unbind('keypress');});});return this;}});;(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}
else if(typeof exports=="object"&&typeof module=="object"){module.exports=factory;}
else{factory(jQuery);}})(function($,undefined){"use strict";var defaultOpts={beforeShow:noop,move:noop,change:noop,show:noop,hide:noop,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},spectrums=[],IE=!!/msie/i.exec(window.navigator.userAgent),rgbaSupport=(function(){function contains(str,substr){return!!~(''+str).indexOf(substr);}
var elem=document.createElement('div');var style=elem.style;style.cssText='background-color:rgba(0,0,0,.5)';return contains(style.backgroundColor,'rgba')||contains(style.backgroundColor,'hsla');})(),replaceInput=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(''),markup=(function(){var gradientFix="";if(IE){for(var i=1;i<=6;i++){gradientFix+="<div class='sp-"+i+"'></div>";}}
return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",gradientFix,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("");})();function paletteTemplate(p,color,className,opts){var html=[];for(var i=0;i<p.length;i++){var current=p[i];if(current){var tiny=tinycolor(current);var c=tiny.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=(tinycolor.equals(color,current))?" sp-thumb-active":"";var formattedString=tiny.toString(opts.preferredFormat||"rgb");var swatchStyle=rgbaSupport?("background-color:"+tiny.toRgbString()):"filter:"+tiny.toFilter();html.push('<span title="'+formattedString+'" data-color="'+tiny.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+swatchStyle+';" /></span>');}else{var cls='sp-clear-display';html.push($('<div />').append($('<span data-color="" style="background-color:transparent;" class="'+cls+'"></span>').attr('title',opts.noColorSelectedText)).html());}}
return"<div class='sp-cf "+className+"'>"+html.join('')+"</div>";}
function hideAll(){for(var i=0;i<spectrums.length;i++){if(spectrums[i]){spectrums[i].hide();}}}
function instanceOptions(o,callbackContext){var opts=$.extend({},defaultOpts,o);opts.callbacks={'move':bind(opts.move,callbackContext),'change':bind(opts.change,callbackContext),'show':bind(opts.show,callbackContext),'hide':bind(opts.hide,callbackContext),'beforeShow':bind(opts.beforeShow,callbackContext)};return opts;}
function spectrum(element,o){var opts=instanceOptions(o,element),flat=opts.flat,showSelectionPalette=opts.showSelectionPalette,localStorageKey=opts.localStorageKey,theme=opts.theme,callbacks=opts.callbacks,resize=throttle(reflow,10),visible=false,isDragging=false,dragWidth=0,dragHeight=0,dragHelperHeight=0,slideHeight=0,slideWidth=0,alphaWidth=0,alphaSlideHelperWidth=0,slideHelperHeight=0,currentHue=0,currentSaturation=0,currentValue=0,currentAlpha=1,palette=[],paletteArray=[],paletteLookup={},selectionPalette=opts.selectionPalette.slice(0),maxSelectionSize=opts.maxSelectionSize,draggingClass="sp-dragging",shiftMovementDirection=null;var doc=element.ownerDocument,body=doc.body,boundElement=$(element),disabled=false,container=$(markup,doc).addClass(theme),pickerContainer=container.find(".sp-picker-container"),dragger=container.find(".sp-color"),dragHelper=container.find(".sp-dragger"),slider=container.find(".sp-hue"),slideHelper=container.find(".sp-slider"),alphaSliderInner=container.find(".sp-alpha-inner"),alphaSlider=container.find(".sp-alpha"),alphaSlideHelper=container.find(".sp-alpha-handle"),textInput=container.find(".sp-input"),paletteContainer=container.find(".sp-palette"),initialColorContainer=container.find(".sp-initial"),cancelButton=container.find(".sp-cancel"),clearButton=container.find(".sp-clear"),chooseButton=container.find(".sp-choose"),toggleButton=container.find(".sp-palette-toggle"),isInput=boundElement.is("input"),isInputTypeColor=isInput&&boundElement.attr("type")==="color"&&inputTypeColorSupport(),shouldReplace=isInput&&!flat,replacer=(shouldReplace)?$(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName):$([]),offsetElement=(shouldReplace)?replacer:boundElement,previewElement=replacer.find(".sp-preview-inner"),initialColor=opts.color||(isInput&&boundElement.val()),colorOnShow=false,preferredFormat=opts.preferredFormat,currentPreferredFormat=preferredFormat,clickoutFiresChange=(typeof(opts.clickoutFiresChange)!='undefined'?opts.clickoutFiresChange:!opts.showButtons||opts.clickoutFiresChange),isEmpty=!initialColor,allowEmpty=opts.allowEmpty&&!isInputTypeColor;function applyOptions(){if(opts.showPaletteOnly){opts.showPalette=true;}
toggleButton.text(opts.showPaletteOnly?opts.togglePaletteMoreText:opts.togglePaletteLessText);if(opts.palette){palette=opts.palette.slice(0);paletteArray=$.isArray(palette[0])?palette:[palette];paletteLookup={};for(var i=0;i<paletteArray.length;i++){for(var j=0;j<paletteArray[i].length;j++){var rgb=tinycolor(paletteArray[i][j]).toRgbString();paletteLookup[rgb]=true;}}}
container.toggleClass("sp-flat",flat);container.toggleClass("sp-input-disabled",!opts.showInput);container.toggleClass("sp-alpha-enabled",opts.showAlpha);container.toggleClass("sp-clear-enabled",allowEmpty);container.toggleClass("sp-buttons-disabled",!opts.showButtons);container.toggleClass("sp-palette-buttons-disabled",!opts.togglePaletteOnly);container.toggleClass("sp-palette-disabled",!opts.showPalette);container.toggleClass("sp-palette-only",opts.showPaletteOnly);container.toggleClass("sp-initial-disabled",!opts.showInitial);container.addClass(opts.className).addClass(opts.containerClassName);reflow();}
function initialize(){if(IE){container.find("*:not(input)").attr("unselectable","on");}
applyOptions();if(shouldReplace){boundElement.after(replacer).hide();}
if(!allowEmpty){clearButton.hide();}
if(flat){boundElement.after(container).hide();}
else{var appendTo=opts.appendTo==="parent"?boundElement.parent():$(opts.appendTo);if(appendTo.length!==1){appendTo=$("body");}
appendTo.append(container);}
updateSelectionPaletteFromStorage();offsetElement.bind("click.spectrum touchstart.spectrum",function(e){if(!disabled){toggle();}
e.stopPropagation();if(!$(e.target).is("input")){e.preventDefault();}});if(boundElement.is(":disabled")||(opts.disabled===true)){disable();}
container.click(stopPropagation);textInput.change(setFromTextInput);textInput.bind("paste",function(){setTimeout(setFromTextInput,1);});textInput.keydown(function(e){if(e.keyCode==13){setFromTextInput();}});cancelButton.text(opts.cancelText);cancelButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();revert();hide();});clearButton.attr("title",opts.clearText);clearButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();isEmpty=true;move();if(flat){updateOriginalInput(true);}});chooseButton.text(opts.chooseText);chooseButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();if(IE&&textInput.is(":focus")){textInput.trigger('change');}
if(isValid()){updateOriginalInput(true);hide();}});toggleButton.text(opts.showPaletteOnly?opts.togglePaletteMoreText:opts.togglePaletteLessText);toggleButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();opts.showPaletteOnly=!opts.showPaletteOnly;if(!opts.showPaletteOnly&&!flat){container.css('left','-='+(pickerContainer.outerWidth(true)+5));}
applyOptions();});draggable(alphaSlider,function(dragX,dragY,e){currentAlpha=(dragX/alphaWidth);isEmpty=false;if(e.shiftKey){currentAlpha=Math.round(currentAlpha*10)/10;}
move();},dragStart,dragStop);draggable(slider,function(dragX,dragY){currentHue=parseFloat(dragY/slideHeight);isEmpty=false;if(!opts.showAlpha){currentAlpha=1;}
move();},dragStart,dragStop);draggable(dragger,function(dragX,dragY,e){if(!e.shiftKey){shiftMovementDirection=null;}
else if(!shiftMovementDirection){var oldDragX=currentSaturation*dragWidth;var oldDragY=dragHeight-(currentValue*dragHeight);var furtherFromX=Math.abs(dragX-oldDragX)>Math.abs(dragY-oldDragY);shiftMovementDirection=furtherFromX?"x":"y";}
var setSaturation=!shiftMovementDirection||shiftMovementDirection==="x";var setValue=!shiftMovementDirection||shiftMovementDirection==="y";if(setSaturation){currentSaturation=parseFloat(dragX/dragWidth);}
if(setValue){currentValue=parseFloat((dragHeight-dragY)/dragHeight);}
isEmpty=false;if(!opts.showAlpha){currentAlpha=1;}
move();},dragStart,dragStop);if(!!initialColor){set(initialColor);updateUI();currentPreferredFormat=preferredFormat||tinycolor(initialColor).format;addColorToSelectionPalette(initialColor);}
else{updateUI();}
if(flat){show();}
function paletteElementClick(e){if(e.data&&e.data.ignore){set($(e.target).closest(".sp-thumb-el").data("color"));move();}
else{set($(e.target).closest(".sp-thumb-el").data("color"));move();updateOriginalInput(true);if(opts.hideAfterPaletteSelect){hide();}}
return false;}
var paletteEvent=IE?"mousedown.spectrum":"click.spectrum touchstart.spectrum";paletteContainer.delegate(".sp-thumb-el",paletteEvent,paletteElementClick);initialColorContainer.delegate(".sp-thumb-el:nth-child(1)",paletteEvent,{ignore:true},paletteElementClick);}
function updateSelectionPaletteFromStorage(){if(localStorageKey&&window.localStorage){try{var oldPalette=window.localStorage[localStorageKey].split(",#");if(oldPalette.length>1){delete window.localStorage[localStorageKey];$.each(oldPalette,function(i,c){addColorToSelectionPalette(c);});}}
catch(e){}
try{selectionPalette=window.localStorage[localStorageKey].split(";");}
catch(e){}}}
function addColorToSelectionPalette(color){if(showSelectionPalette){var rgb=tinycolor(color).toRgbString();if(!paletteLookup[rgb]&&$.inArray(rgb,selectionPalette)===-1){selectionPalette.push(rgb);while(selectionPalette.length>maxSelectionSize){selectionPalette.shift();}}
if(localStorageKey&&window.localStorage){try{window.localStorage[localStorageKey]=selectionPalette.join(";");}
catch(e){}}}}
function getUniqueSelectionPalette(){var unique=[];if(opts.showPalette){for(var i=0;i<selectionPalette.length;i++){var rgb=tinycolor(selectionPalette[i]).toRgbString();if(!paletteLookup[rgb]){unique.push(selectionPalette[i]);}}}
return unique.reverse().slice(0,opts.maxSelectionSize);}
function drawPalette(){var currentColor=get();var html=$.map(paletteArray,function(palette,i){return paletteTemplate(palette,currentColor,"sp-palette-row sp-palette-row-"+i,opts);});updateSelectionPaletteFromStorage();if(selectionPalette){html.push(paletteTemplate(getUniqueSelectionPalette(),currentColor,"sp-palette-row sp-palette-row-selection",opts));}
paletteContainer.html(html.join(""));}
function drawInitial(){if(opts.showInitial){var initial=colorOnShow;var current=get();initialColorContainer.html(paletteTemplate([initial,current],current,"sp-palette-row-initial",opts));}}
function dragStart(){if(dragHeight<=0||dragWidth<=0||slideHeight<=0){reflow();}
isDragging=true;container.addClass(draggingClass);shiftMovementDirection=null;boundElement.trigger('dragstart.spectrum',[get()]);}
function dragStop(){isDragging=false;container.removeClass(draggingClass);boundElement.trigger('dragstop.spectrum',[get()]);}
function setFromTextInput(){var value=textInput.val();if((value===null||value==="")&&allowEmpty){set(null);updateOriginalInput(true);}
else{var tiny=tinycolor(value);if(tiny.isValid()){set(tiny);updateOriginalInput(true);}
else{textInput.addClass("sp-validation-error");}}}
function toggle(){if(visible){hide();}
else{show();}}
function show(){var event=$.Event('beforeShow.spectrum');if(visible){reflow();return;}
boundElement.trigger(event,[get()]);if(callbacks.beforeShow(get())===false||event.isDefaultPrevented()){return;}
hideAll();visible=true;$(doc).bind("keydown.spectrum",onkeydown);$(doc).bind("click.spectrum",clickout);$(window).bind("resize.spectrum",resize);replacer.addClass("sp-active");container.removeClass("sp-hidden");reflow();updateUI();colorOnShow=get();drawInitial();callbacks.show(colorOnShow);boundElement.trigger('show.spectrum',[colorOnShow]);}
function onkeydown(e){if(e.keyCode===27){hide();}}
function clickout(e){if(e.button==2){return;}
if(isDragging){return;}
if(clickoutFiresChange){updateOriginalInput(true);}
else if(!flat){revert();}
hide();}
function hide(){if(!visible||flat){return;}
visible=false;$(doc).unbind("keydown.spectrum",onkeydown);$(doc).unbind("click.spectrum",clickout);$(window).unbind("resize.spectrum",resize);replacer.removeClass("sp-active");container.addClass("sp-hidden");callbacks.hide(get());boundElement.trigger('hide.spectrum',[get()]);}
function revert(){set(colorOnShow,true);}
function set(color,ignoreFormatChange){if(tinycolor.equals(color,get())){updateUI();return;}
var newColor,newHsv;if(!color&&allowEmpty){isEmpty=true;}else{isEmpty=false;newColor=tinycolor(color);newHsv=newColor.toHsv();currentHue=(newHsv.h%360)/360;currentSaturation=newHsv.s;currentValue=newHsv.v;currentAlpha=newHsv.a;}
updateUI();if(newColor&&newColor.isValid()&&!ignoreFormatChange){currentPreferredFormat=preferredFormat||newColor.getFormat();}}
function get(opts){opts=opts||{};if(allowEmpty&&isEmpty){return null;}
return tinycolor.fromRatio({h:currentHue,s:currentSaturation,v:currentValue,a:Math.round(currentAlpha*100)/100},{format:opts.format||currentPreferredFormat});}
function isValid(){return!textInput.hasClass("sp-validation-error");}
function move(){updateUI();callbacks.move(get());boundElement.trigger('move.spectrum',[get()]);}
function updateUI(){textInput.removeClass("sp-validation-error");updateHelperLocations();var flatColor=tinycolor.fromRatio({h:currentHue,s:1,v:1});dragger.css("background-color",flatColor.toHexString());var format=currentPreferredFormat;if(currentAlpha<1&&!(currentAlpha===0&&format==="name")){if(format==="hex"||format==="hex3"||format==="hex6"||format==="name"){format="rgb";}}
var realColor=get({format:format}),displayColor='';previewElement.removeClass("sp-clear-display");previewElement.css('background-color','transparent');if(!realColor&&allowEmpty){previewElement.addClass("sp-clear-display");}
else{var realHex=realColor.toHexString(),realRgb=realColor.toRgbString();if(rgbaSupport||realColor.alpha===1){previewElement.css("background-color",realRgb);}
else{previewElement.css("background-color","transparent");previewElement.css("filter",realColor.toFilter());}
if(opts.showAlpha){var rgb=realColor.toRgb();rgb.a=0;var realAlpha=tinycolor(rgb).toRgbString();var gradient="linear-gradient(left, "+realAlpha+", "+realHex+")";if(IE){alphaSliderInner.css("filter",tinycolor(realAlpha).toFilter({gradientType:1},realHex));}
else{alphaSliderInner.css("background","-webkit-"+gradient);alphaSliderInner.css("background","-moz-"+gradient);alphaSliderInner.css("background","-ms-"+gradient);alphaSliderInner.css("background","linear-gradient(to right, "+realAlpha+", "+realHex+")");}}
displayColor=realColor.toString(format);}
if(opts.showInput){textInput.val(displayColor);}
if(opts.showPalette){drawPalette();}
drawInitial();}
function updateHelperLocations(){var s=currentSaturation;var v=currentValue;if(allowEmpty&&isEmpty){alphaSlideHelper.hide();slideHelper.hide();dragHelper.hide();}
else{alphaSlideHelper.show();slideHelper.show();dragHelper.show();var dragX=s*dragWidth;var dragY=dragHeight-(v*dragHeight);dragX=Math.max(-dragHelperHeight,Math.min(dragWidth-dragHelperHeight,dragX-dragHelperHeight));dragY=Math.max(-dragHelperHeight,Math.min(dragHeight-dragHelperHeight,dragY-dragHelperHeight));dragHelper.css({"top":dragY+"px","left":dragX+"px"});var alphaX=currentAlpha*alphaWidth;alphaSlideHelper.css({"left":(alphaX-(alphaSlideHelperWidth/2))+"px"});var slideY=(currentHue)*slideHeight;slideHelper.css({"top":(slideY-slideHelperHeight)+"px"});}}
function updateOriginalInput(fireCallback){var color=get(),displayColor='',hasChanged=!tinycolor.equals(color,colorOnShow);if(color){displayColor=color.toString(currentPreferredFormat);addColorToSelectionPalette(color);}
if(isInput){boundElement.val(displayColor);}
if(fireCallback&&hasChanged){callbacks.change(color);boundElement.trigger('change',[color]);}}
function reflow(){dragWidth=dragger.width();dragHeight=dragger.height();dragHelperHeight=dragHelper.height();slideWidth=slider.width();slideHeight=slider.height();slideHelperHeight=slideHelper.height();alphaWidth=alphaSlider.width();alphaSlideHelperWidth=alphaSlideHelper.width();if(!flat){container.css("position","absolute");if(opts.offset){container.offset(opts.offset);}else{container.offset(getOffset(container,offsetElement));}}
updateHelperLocations();if(opts.showPalette){drawPalette();}
boundElement.trigger('reflow.spectrum');}
function destroy(){boundElement.show();offsetElement.unbind("click.spectrum touchstart.spectrum");container.remove();replacer.remove();spectrums[spect.id]=null;}
function option(optionName,optionValue){if(optionName===undefined){return $.extend({},opts);}
if(optionValue===undefined){return opts[optionName];}
opts[optionName]=optionValue;applyOptions();}
function enable(){disabled=false;boundElement.attr("disabled",false);offsetElement.removeClass("sp-disabled");}
function disable(){hide();disabled=true;boundElement.attr("disabled",true);offsetElement.addClass("sp-disabled");}
function setOffset(coord){opts.offset=coord;reflow();}
initialize();var spect={show:show,hide:hide,toggle:toggle,reflow:reflow,option:option,enable:enable,disable:disable,offset:setOffset,set:function(c){set(c);updateOriginalInput();},get:get,destroy:destroy,container:container};spect.id=spectrums.push(spect)-1;return spect;}
function getOffset(picker,input){var extraY=0;var dpWidth=picker.outerWidth();var dpHeight=picker.outerHeight();var inputHeight=input.outerHeight();var doc=picker[0].ownerDocument;var docElem=doc.documentElement;var viewWidth=docElem.clientWidth+$(doc).scrollLeft();var viewHeight=docElem.clientHeight+$(doc).scrollTop();var offset=input.offset();offset.top+=inputHeight;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,((offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight-extraY):extraY));return offset;}
function noop(){}
function stopPropagation(e){e.stopPropagation();}
function bind(func,obj){var slice=Array.prototype.slice;var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)));};}
function draggable(element,onmove,onstart,onstop){onmove=onmove||function(){};onstart=onstart||function(){};onstop=onstop||function(){};var doc=document;var dragging=false;var offset={};var maxHeight=0;var maxWidth=0;var hasTouch=('ontouchstart'in window);var duringDragEvents={};duringDragEvents["selectstart"]=prevent;duringDragEvents["dragstart"]=prevent;duringDragEvents["touchmove mousemove"]=move;duringDragEvents["touchend mouseup"]=stop;function prevent(e){if(e.stopPropagation){e.stopPropagation();}
if(e.preventDefault){e.preventDefault();}
e.returnValue=false;}
function move(e){if(dragging){if(IE&&doc.documentMode<9&&!e.button){return stop();}
var t0=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0];var pageX=t0&&t0.pageX||e.pageX;var pageY=t0&&t0.pageY||e.pageY;var dragX=Math.max(0,Math.min(pageX-offset.left,maxWidth));var dragY=Math.max(0,Math.min(pageY-offset.top,maxHeight));if(hasTouch){prevent(e);}
onmove.apply(element,[dragX,dragY,e]);}}
function start(e){var rightclick=(e.which)?(e.which==3):(e.button==2);if(!rightclick&&!dragging){if(onstart.apply(element,arguments)!==false){dragging=true;maxHeight=$(element).height();maxWidth=$(element).width();offset=$(element).offset();$(doc).bind(duringDragEvents);$(doc.body).addClass("sp-dragging");move(e);prevent(e);}}}
function stop(){if(dragging){$(doc).unbind(duringDragEvents);$(doc.body).removeClass("sp-dragging");setTimeout(function(){onstop.apply(element,arguments);},0);}
dragging=false;}
$(element).bind("touchstart mousedown",start);}
function throttle(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args);};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait);};}
function inputTypeColorSupport(){return $.fn.spectrum.inputTypeColorSupport();}
var dataID="spectrum.id";$.fn.spectrum=function(opts,extra){if(typeof opts=="string"){var returnValue=this;var args=Array.prototype.slice.call(arguments,1);this.each(function(){var spect=spectrums[$(this).data(dataID)];if(spect){var method=spect[opts];if(!method){throw new Error("Spectrum: no such method: '"+opts+"'");}
if(opts=="get"){returnValue=spect.get();}
else if(opts=="container"){returnValue=spect.container;}
else if(opts=="option"){returnValue=spect.option.apply(spect,args);}
else if(opts=="destroy"){spect.destroy();$(this).removeData(dataID);}
else{method.apply(spect,args);}}});return returnValue;}
return this.spectrum("destroy").each(function(){var options=$.extend({},opts,$(this).data());var spect=spectrum(this,options);$(this).data(dataID,spect.id);});};$.fn.spectrum.load=true;$.fn.spectrum.loadOpts={};$.fn.spectrum.draggable=draggable;$.fn.spectrum.defaults=defaultOpts;$.fn.spectrum.inputTypeColorSupport=function inputTypeColorSupport(){if(typeof inputTypeColorSupport._cachedResult==="undefined"){var colorInput=$("<input type='color' value='!' />")[0];inputTypeColorSupport._cachedResult=colorInput.type==="color"&&colorInput.value!=="!";}
return inputTypeColorSupport._cachedResult;};$.spectrum={};$.spectrum.localization={};$.spectrum.palettes={};$.fn.spectrum.processNativeColorInputs=function(){var colorInputs=$("input[type=color]");if(colorInputs.length&&!inputTypeColorSupport()){colorInputs.spectrum({preferredFormat:"hex6"});}};(function(){var trimLeft=/^[\s,#]+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;var tinycolor=function(color,opts){color=(color)?color:'';opts=opts||{};if(color instanceof tinycolor){return color;}
if(!(this instanceof tinycolor)){return new tinycolor(color,opts);}
var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format;this._gradientType=opts.gradientType;if(this._r<1){this._r=mathRound(this._r);}
if(this._g<1){this._g=mathRound(this._g);}
if(this._b<1){this._b=mathRound(this._b);}
this._ok=rgb.ok;this._tc_id=tinyCounter++;};tinycolor.prototype={isDark:function(){return this.getBrightness()<128;},isLight:function(){return!this.isDark();},isValid:function(){return this._ok;},getOriginalInput:function(){return this._originalInput;},getFormat:function(){return this._format;},getAlpha:function(){return this._a;},getBrightness:function(){var rgb=this.toRgb();return(rgb.r*299+rgb.g*587+rgb.b*114)/1000;},setAlpha:function(value){this._a=boundAlpha(value);this._roundA=mathRound(100*this._a)/100;return this;},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:hsv.h*360,s:hsv.s,v:hsv.v,a:this._a};},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b);var h=mathRound(hsv.h*360),s=mathRound(hsv.s*100),v=mathRound(hsv.v*100);return(this._a==1)?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")";},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:hsl.h*360,s:hsl.s,l:hsl.l,a:this._a};},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b);var h=mathRound(hsl.h*360),s=mathRound(hsl.s*100),l=mathRound(hsl.l*100);return(this._a==1)?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")";},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char);},toHexString:function(allow3Char){return'#'+this.toHex(allow3Char);},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a);},toHex8String:function(dynamic){if(dynamic){var hex=this.toHex8();if(hex.substr(0,2)!='ff')
return this.toRgbString();return this.toHexString();}
return'#'+this.toHex8();},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a};},toRgbString:function(){return(this._a==1)?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")";},toPercentageRgb:function(){return{r:mathRound(bound01(this._r,255)*100)+"%",g:mathRound(bound01(this._g,255)*100)+"%",b:mathRound(bound01(this._b,255)*100)+"%",a:this._a};},toPercentageRgbString:function(){return(this._a==1)?"rgb("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%)":"rgba("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%, "+this._roundA+")";},toName:function(){if(this._a===0){return"transparent";}
if(this._a<1){return false;}
return hexNames[rgbToHex(this._r,this._g,this._b,true)]||false;},toFilter:function(secondColor){var hex8String='#'+rgbaToHex(this._r,this._g,this._b,this._a);var secondHex8String=hex8String;var gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String();}
return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")";},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=false;var hasAlpha=this._a<1&&this._a>=0;var needsAlphaFormat=!formatSet&&hasAlpha&&(format==="hex"||format==="hex6"||format==="hex3"||format==="name");if(needsAlphaFormat){if(format==="name"&&this._a===0){return this.toName();}
return this.toRgbString();}
if(format==="rgb"){formattedString=this.toRgbString();}
if(format==="prgb"){formattedString=this.toPercentageRgbString();}
if(format==="hex"||format==="hex6"){formattedString=this.toHexString();}
if(format==="hex3"){formattedString=this.toHexString(true);}
if(format==="hex8"){formattedString=this.toHex8String();}
if(format==="hexd"){formattedString=this.toHex8String(true);}
if(format==="name"){formattedString=this.toName();}
if(format==="hsl"){formattedString=this.toHslString();}
if(format==="hsv"){formattedString=this.toHsvString();}
return formattedString||this.toHexString();},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));this._r=color._r;this._g=color._g;this._b=color._b;this.setAlpha(color._a);return this;},lighten:function(){return this._applyModification(lighten,arguments);},brighten:function(){return this._applyModification(brighten,arguments);},darken:function(){return this._applyModification(darken,arguments);},desaturate:function(){return this._applyModification(desaturate,arguments);},saturate:function(){return this._applyModification(saturate,arguments);},greyscale:function(){return this._applyModification(greyscale,arguments);},spin:function(){return this._applyModification(spin,arguments);},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)));},analogous:function(){return this._applyCombination(analogous,arguments);},complement:function(){return this._applyCombination(complement,arguments);},monochromatic:function(){return this._applyCombination(monochromatic,arguments);},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments);},triad:function(){return this._applyCombination(triad,arguments);},tetrad:function(){return this._applyCombination(tetrad,arguments);}};tinycolor.fromRatio=function(color,opts){if(typeof color=="object"){var newColor={};for(var i in color){if(color.hasOwnProperty(i)){if(i==="a"){newColor[i]=color[i];}
else{newColor[i]=convertToPercentage(color[i]);}}}
color=newColor;}
return tinycolor(color,opts);};function inputToRGB(color){var rgb={r:0,g:0,b:0};var a=1;var ok=false;var format=false;if(typeof color=="string"){color=stringInputToObject(color);}
if(typeof color=="object"){if(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")){rgb=rgbToRgb(color.r,color.g,color.b);ok=true;format=String(color.r).substr(-1)==="%"?"prgb":"rgb";}
else if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")){color.s=convertToPercentage(color.s);color.v=convertToPercentage(color.v);rgb=hsvToRgb(color.h,color.s,color.v);ok=true;format="hsv";}
else if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")){color.s=convertToPercentage(color.s);color.l=convertToPercentage(color.l);rgb=hslToRgb(color.h,color.s,color.l);ok=true;format="hsl";}
if(color.hasOwnProperty("a")){a=color.a;}}
a=boundAlpha(a);return{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a};}
function rgbToRgb(r,g,b){return{r:bound01(r,255)*255,g:bound01(g,255)*255,b:bound01(b,255)*255};}
function rgbToHsl(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0;}
else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
h/=6;}
return{h:h,s:s,l:l};}
function hslToRgb(h,s,l){var r,g,b;h=bound01(h,360);s=bound01(s,100);l=bound01(l,100);function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;}
if(s===0){r=g=b=l;}
else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}
return{r:r*255,g:g*255,b:b*255};}
function rgbToHsv(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,v=max;var d=max-min;s=max===0?0:d/max;if(max==min){h=0;}
else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
h/=6;}
return{h:h,s:s,v:v};}
function hsvToRgb(h,s,v){h=bound01(h,360)*6;s=bound01(s,100);v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:r*255,g:g*255,b:b*255};}
function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];if(allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0);}
return hex.join("");}
function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("");}
tinycolor.equals=function(color1,color2){if(!color1||!color2){return false;}
return tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString();};tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()});};function desaturate(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.s-=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl);}
function saturate(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.s+=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl);}
function greyscale(color){return tinycolor(color).desaturate(100);}
function lighten(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.l+=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl);}
function brighten(color,amount){amount=(amount===0)?0:(amount||10);var rgb=tinycolor(color).toRgb();rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100))));rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100))));rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100))));return tinycolor(rgb);}
function darken(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.l-=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl);}
function spin(color,amount){var hsl=tinycolor(color).toHsl();var hue=(mathRound(hsl.h)+amount)%360;hsl.h=hue<0?360+hue:hue;return tinycolor(hsl);}
function complement(color){var hsl=tinycolor(color).toHsl();hsl.h=(hsl.h+180)%360;return tinycolor(hsl);}
function triad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})];}
function tetrad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})];}
function splitcomplement(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})];}
function analogous(color,results,slices){results=results||6;slices=slices||30;var hsl=tinycolor(color).toHsl();var part=360/slices;var ret=[tinycolor(color)];for(hsl.h=((hsl.h-(part*results>>1))+720)%360;--results;){hsl.h=(hsl.h+part)%360;ret.push(tinycolor(hsl));}
return ret;}
function monochromatic(color,results){results=results||6;var hsv=tinycolor(color).toHsv();var h=hsv.h,s=hsv.s,v=hsv.v;var ret=[];var modification=1/results;while(results--){ret.push(tinycolor({h:h,s:s,v:v}));v=(v+modification)%1;}
return ret;}
tinycolor.mix=function(color1,color2,amount){amount=(amount===0)?0:(amount||50);var rgb1=tinycolor(color1).toRgb();var rgb2=tinycolor(color2).toRgb();var p=amount/100;var w=p*2-1;var a=rgb2.a-rgb1.a;var w1;if(w*a==-1){w1=w;}else{w1=(w+a)/(1+w*a);}
w1=(w1+1)/2;var w2=1-w1;var rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba);};tinycolor.readability=function(color1,color2){var c1=tinycolor(color1);var c2=tinycolor(color2);var rgb1=c1.toRgb();var rgb2=c2.toRgb();var brightnessA=c1.getBrightness();var brightnessB=c2.getBrightness();var colorDiff=(Math.max(rgb1.r,rgb2.r)-Math.min(rgb1.r,rgb2.r)+
Math.max(rgb1.g,rgb2.g)-Math.min(rgb1.g,rgb2.g)+
Math.max(rgb1.b,rgb2.b)-Math.min(rgb1.b,rgb2.b));return{brightness:Math.abs(brightnessA-brightnessB),color:colorDiff};};tinycolor.isReadable=function(color1,color2){var readability=tinycolor.readability(color1,color2);return readability.brightness>125&&readability.color>500;};tinycolor.mostReadable=function(baseColor,colorList){var bestColor=null;var bestScore=0;var bestIsReadable=false;for(var i=0;i<colorList.length;i++){var readability=tinycolor.readability(baseColor,colorList[i]);var readable=readability.brightness>125&&readability.color>500;var score=3*(readability.brightness/125)+(readability.color/500);if((readable&&!bestIsReadable)||(readable&&bestIsReadable&&score>bestScore)||((!readable)&&(!bestIsReadable)&&score>bestScore)){bestIsReadable=readable;bestScore=score;bestColor=tinycolor(colorList[i]);}}
return bestColor;};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var hexNames=tinycolor.hexNames=flip(names);function flip(o){var flipped={};for(var i in o){if(o.hasOwnProperty(i)){flipped[o[i]]=i;}}
return flipped;}
function boundAlpha(a){a=parseFloat(a);if(isNaN(a)||a<0||a>1){a=1;}
return a;}
function bound01(n,max){if(isOnePointZero(n)){n="100%";}
var processPercent=isPercentage(n);n=mathMin(max,mathMax(0,parseFloat(n)));if(processPercent){n=parseInt(n*max,10)/100;}
if((math.abs(n-max)<0.000001)){return 1;}
return(n%max)/parseFloat(max);}
function clamp01(val){return mathMin(1,mathMax(0,val));}
function parseIntFromHex(val){return parseInt(val,16);}
function isOnePointZero(n){return typeof n=="string"&&n.indexOf('.')!=-1&&parseFloat(n)===1;}
function isPercentage(n){return typeof n==="string"&&n.indexOf('%')!=-1;}
function pad2(c){return c.length==1?'0'+c:''+c;}
function convertToPercentage(n){if(n<=1){n=(n*100)+"%";}
return n;}
function convertDecimalToHex(d){return Math.round(parseFloat(d)*255).toString(16);}
function convertHexToDecimal(h){return(parseIntFromHex(h)/255);}
var matchers=(function(){var CSS_INTEGER="[-\\+]?\\d+%?";var CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?";var CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")";var PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";var PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hexd:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};})();function stringInputToObject(color){color=color.replace(trimLeft,'').replace(trimRight,'').toLowerCase();var named=false;if(names[color]){color=names[color];named=true;}
else if(color=='transparent'){return{r:0,g:0,b:0,a:0,format:"name"};}
var match;if((match=matchers.rgb.exec(color))){return{r:match[1],g:match[2],b:match[3]};}
if((match=matchers.rgba.exec(color))){return{r:match[1],g:match[2],b:match[3],a:match[4]};}
if((match=matchers.hsl.exec(color))){return{h:match[1],s:match[2],l:match[3]};}
if((match=matchers.hsla.exec(color))){return{h:match[1],s:match[2],l:match[3],a:match[4]};}
if((match=matchers.hsv.exec(color))){return{h:match[1],s:match[2],v:match[3]};}
if((match=matchers.hsva.exec(color))){return{h:match[1],s:match[2],v:match[3],a:match[4]};}
if((match=matchers.hex8.exec(color))){return{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"};}
if((match=matchers.hex6.exec(color))){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"};}
if((match=matchers.hex3.exec(color))){return{r:parseIntFromHex(match[1]+''+match[1]),g:parseIntFromHex(match[2]+''+match[2]),b:parseIntFromHex(match[3]+''+match[3]),format:named?"name":"hex"};}
return false;}
window.tinycolor=tinycolor;})();$(function(){if($.fn.spectrum.load){$.fn.spectrum.processNativeColorInputs();}});});;(function($){var passy={character:{DIGIT:1,LOWERCASE:2,UPPERCASE:4,PUNCTUATION:8},strength:{LOW:0,MEDIUM:1,HIGH:2,EXTREME:3},dictionary:[],patterns:['0123456789','abcdefghijklmnopqrstuvwxyz','qwertyuiopasdfghjklzxcvbnm','azertyuiopqsdfghjklmwxcvbn','!#$*+-.:?@^'],threshold:{medium:16,high:22,extreme:36}};passy.requirements={characters:passy.character.DIGIT|passy.character.LOWERCASE|passy.character.UPPERCASE,length:{min:6,max:Infinity}};if(Object.seal){Object.seal(passy.character);Object.seal(passy.strength);}
if(Object.freeze){Object.freeze(passy.character);Object.freeze(passy.strength);}
passy.analize=function(password,return_score){var score=Math.floor(password.length*2);var i=password.length;score+=$.passy.analizePatterns(password);score+=$.passy.analizeDictionary(password);while(i--)score+=$.passy.analizeCharacter(password.charAt(i));if(return_score)
return score;return $.passy.analizeScore(score);};passy.analizeCharacter=function(character){var code=character.charCodeAt(0);if(code>=97&&code<=122)return 1;if(code>=48&&code<=57)return 2;if(code>=65&&code<=90)return 3;if(code<=126)return 4;return 5;};passy.analizePattern=function(password,pattern){var lastmatch=-1;var score=-2;for(var i=0;i<password.length;i++){var match=pattern.indexOf(password.charAt(i));if(lastmatch===match-1){lastmatch=match;score++;}}
return Math.max(0,score);};passy.analizePatterns=function(password){var chars=password.toLowerCase();var score=0;for(var i in $.passy.patterns){var pattern=$.passy.patterns[i].toLowerCase();score+=$.passy.analizePattern(chars,pattern);}
return score*-5;};passy.analizeDictionary=function(password){var chars=password.toLowerCase();var score=0;for(var i in $.passy.dictionary){var word=$.passy.dictionary[i].toLowerCase();if(password.indexOf(word)>=0)score++;}
return score*-5;};passy.analizeScore=function(score){if(score>=$.passy.threshold.extreme)return $.passy.strength.EXTREME;if(score>=$.passy.threshold.high)return $.passy.strength.HIGH;if(score>=$.passy.threshold.medium)return $.passy.strength.MEDIUM;return $.passy.strength.LOW;};passy.generate=function(len,specials,numbers,uppercases){var chars=['abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ','0123456789','!#$&()*+<=>@[]^'];if(typeof(specials)!='undefined'&&!specials)
chars.splice(3,1);if(typeof(numbers)!='undefined'&&!numbers)
chars.splice(2,1);if(typeof(uppercases)!='undefined'&&!uppercases)
chars.splice(1,1);var password=[];var type,index;len=Math.max(len,$.passy.requirements.length.min);len=Math.min(len,$.passy.requirements.length.max);while(len--){type=len%chars.length;index=Math.floor(Math.random()*chars[type].length);password.push(chars[type].charAt(index));}
password.sort(function(){return Math.random()*2-1;});return password.join('');};passy.contains=function(str,character){if(character===$.passy.character.DIGIT){return /\d/.test(str);}else if(character===$.passy.character.LOWERCASE){return /[a-z]/.test(str);}else if(character===$.passy.character.UPPERCASE){return /[A-Z]/.test(str);}else if(character===$.passy.character.PUNCTUATION){return /[!"#$%&'()*+,\-./:;<=>?@[\\]\^_`{\|}~]/.test(str);}};passy.valid=function(str){var valid=true;if(!$.passy.requirements)return true;if(str.length<$.passy.requirements.length.min)return false;if(str.length>$.passy.requirements.length.max)return false;for(var i in $.passy.character){if($.passy.requirements.characters&$.passy.character[i]){valid=$.passy.contains(str,$.passy.character[i])&&valid;}}
return valid;};var methods={init:function(callback){var $this=$(this);$this.on('change keyup',function(){if(typeof callback!=='function')return;var value=$this.val();callback.call($this,$.passy.analize(value),methods.valid.call($this));});},generate:function(len,specials,numbers,uppercases){this.val($.passy.generate(len,specials,numbers,uppercases));this.change();},valid:function(){return $.passy.valid(this.val());},ui:function(){var $this=$(this);if($this.parent().find('.passy_status').length)
return;$this.after('<span class="passy_status"><i></i></span>');if(typeof($this.tipsy)!='undefined')
$this.after('<a class="passy_icon" title="Password Generator"><b>*</b></a>');var jicon=$this.parent().find('.passy_icon');jicon.click(function(){if(jicon.data('tipsy')){if(jicon.data('tipsy').$tip.is(':visible')){jicon.data('tipsy').$tip.hide();}else{jicon.data('tipsy').$tip.show();jicon.tipsy("update");}
return false;}
jicon.tipsy({trigger:'manual',html:true,opacity:1.0,additionalClassName:'tipsy-big',closeButton:true,gravity:'n'});jicon.tipsy("show");if(jicon.closest('#fancybox-content').length)
jicon.data('tipsy').$tip.css({'z-index':'1102'});var content=$('<div class="passy_generator form">'+'<fieldset>'+'<div class="field"><input type="text" /><select></select></div>'+'<div class="field">'+'<label><input type="checkbox" name="passy_specials" checked="true" /> Special chars</label> '+'<label><input type="checkbox" name="passy_numbers" checked="true" /> Numbers</label> '+'<label><input type="checkbox" name="passy_uppers" checked="true" /> Upper/Lower case</label></div>'+'</fieldset>'+'<p class="buttons"><input type="submit" class="button b" value="Use" /> <input type="button" class="button" value="Generate New" /></p>'+'</div>');var password=content.find('input[type=text]');var select=content.find('select');var generate=content.find('input[type=button]');var use=content.find('input[type=submit]');var checkboxes=content.find('input[type=checkbox]');var specials=true,numbers=true,uppers=true;for(var i=6;i<=32;i++)
select.append('<option'+(i==16?' selected="true"':'')+'>'+i+'</option>');checkboxes.change(function(){if(this.name=='passy_specials')
specials=this.checked;if(this.name=='passy_numbers')
numbers=this.checked;if(this.name=='passy_uppers')
uppers=this.checked;});generate.click(function(){password.passy('generate',select.val(),specials,numbers,uppers);return false;}).click();use.click(function(){$this.val(password.val()).trigger('change');jicon.data('tipsy').$tip.hide();return false;});jicon.data('tipsy').$tip.find('.tipsy-inner').html(content);jicon.tipsy("update");});$this.on('change keyup',function(){var jstatus=$(this).parent().find('.passy_status');var score=$.passy.analize(this.value,true);var percent=score*100/36;percent=percent<100?percent:100;var red=Math.round((100-percent)*200/50);var green=Math.round(percent*200/50);jstatus.find('i').css('width',percent+'%').css('background-color','rgb('+red+', '+(green<200?green:200)+', 0)');});}};$.fn.passy=function(opt){if(methods[opt]){return methods[opt].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof opt==='function'||!opt){return methods.init.apply(this,arguments);}
return this;};$.extend({passy:passy});})(jQuery);;(function($){"use strict";var methods={init:function(options){var form=this;if(!form.data('jqv')||form.data('jqv')==null){options=methods._saveOptions(form,options);$(document).on("click",".formError",function(){$(this).fadeOut(150,function(){$(this).parent('.formErrorOuter').remove();$(this).remove();});});}
return this;},attach:function(userOptions){var form=this;var options;if(userOptions)
options=methods._saveOptions(form,userOptions);else
options=form.data('jqv');options.validateAttribute=(form.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(options.binded){form.on("click","["+options.validateAttribute+"*=validate][type=checkbox],["+options.validateAttribute+"*=validate][type=radio]",methods._onFieldEvent);form.on(options.validationEventTrigger,"["+options.validateAttribute+"*=validate][class*=datepicker]",{"delay":300},methods._onFieldEvent);}
if(options.autoPositionUpdate){$(window).bind("resize",{"noAnimation":true,"formElem":form},methods.updatePromptsPosition);}
form.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);form.removeData('jqv_submitButton');form.on("submit",methods._onSubmitEvent);return this;},detach:function(){var form=this;var options=form.data('jqv');form.find("["+options.validateAttribute+"*=validate]").not("[type=checkbox]").off(options.validationEventTrigger,methods._onFieldEvent);form.find("["+options.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",methods._onFieldEvent);form.off("submit",methods._onSubmitEvent);form.removeData('jqv');form.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",methods._submitButtonClick);form.removeData('jqv_submitButton');if(options.autoPositionUpdate)
$(window).off("resize",methods.updatePromptsPosition);return this;},validate:function(){var element=$(this);var valid=null;if(element.is("form")||element.hasClass("validationEngineContainer")){if(element.hasClass('validating')){return false;}else{element.addClass('validating');var options=element.data('jqv');var valid=methods._validateFields(this);setTimeout(function(){element.removeClass('validating');},100);if(valid&&options.onSuccess){options.onSuccess();}else if(!valid&&options.onFailure){options.onFailure();}}}else if(element.is('form')||element.hasClass('validationEngineContainer')){element.removeClass('validating');}else{var form=element.closest('form, .validationEngineContainer'),options=(form.data('jqv'))?form.data('jqv'):$.validationEngine.defaults,valid=methods._validateField(element,options);if(valid&&options.onFieldSuccess)
options.onFieldSuccess();else if(options.onFieldFailure&&options.InvalidFields.length>0){options.onFieldFailure();}}
if(options.onValidationComplete){return!!options.onValidationComplete(form,valid);}
return valid;},updatePromptsPosition:function(event){if(event&&this==window){var form=event.data.formElem;var noAnimation=event.data.noAnimation;}
else
var form=$(this.closest('form, .validationEngineContainer'));var options=form.data('jqv');form.find('['+options.validateAttribute+'*=validate]').not(":disabled").each(function(){var field=$(this);if(options.prettySelect&&field.is(":hidden"))
field=form.find("#"+options.usePrefix+field.attr('id')+options.useSuffix);var prompt=methods._getPrompt(field);var promptText=$(prompt).find(".formErrorContent").html();if(prompt)
methods._updatePrompt(field,$(prompt),promptText,undefined,false,options,noAnimation);});return this;},showPrompt:function(promptText,type,promptPosition,showArrow){var form=this.closest('form, .validationEngineContainer');var options=form.data('jqv');if(!options)
options=methods._saveOptions(this,options);if(promptPosition)
options.promptPosition=promptPosition;options.showArrow=showArrow==true;methods._showPrompt(this,promptText,type,false,options);return this;},hide:function(){var form=$(this).closest('form, .validationEngineContainer');var options=form.data('jqv');var fadeDuration=(options&&options.fadeDuration)?options.fadeDuration:0.3;var closingtag;if($(this).is("form")||$(this).hasClass("validationEngineContainer")){closingtag="parentForm"+methods._getClassName($(this).attr("id"));}else{closingtag=methods._getClassName($(this).attr("id"))+"formError";}
$('.'+closingtag).fadeTo(fadeDuration,0.3,function(){$(this).parent('.formErrorOuter').remove();$(this).remove();});return this;},hideAll:function(){var form=this;var options=form.data('jqv');var duration=options?options.fadeDuration:300;$('.formError').fadeTo(duration,300,function(){$(this).parent('.formErrorOuter').remove();$(this).remove();});return this;},_onFieldEvent:function(event){var field=$(this);var form=field.closest('form, .validationEngineContainer');var options=form.data('jqv');options.eventTrigger="field";window.setTimeout(function(){methods._validateField(field,options);if(options.InvalidFields.length==0&&options.onFieldSuccess){options.onFieldSuccess();}else if(options.InvalidFields.length>0&&options.onFieldFailure){options.onFieldFailure();}},(event.data)?event.data.delay:0);},_onSubmitEvent:function(){var form=$(this);var options=form.data('jqv');if(form.data("jqv_submitButton")){var submitButton=$("#"+form.data("jqv_submitButton"));if(submitButton){if(submitButton.length>0){if(submitButton.hasClass("validate-skip")||submitButton.attr("data-validation-engine-skip")=="true")
return true;}}}
options.eventTrigger="submit";var r=methods._validateFields(form);if(r&&options.ajaxFormValidation){methods._validateFormWithAjax(form,options);return false;}
if(options.onValidationComplete){return!!options.onValidationComplete(form,r);}
return r;},_checkAjaxStatus:function(options){var status=true;$.each(options.ajaxValidCache,function(key,value){if(!value){status=false;return false;}});return status;},_checkAjaxFieldStatus:function(fieldid,options){return options.ajaxValidCache[fieldid]==true;},_validateFields:function(form){var options=form.data('jqv');var errorFound=false;form.trigger("jqv.form.validating");var first_err=null;form.find('['+options.validateAttribute+'*=validate]').not(":disabled").filter(":input").each(function(){var field=$(this);var names=[];if($.inArray(field.attr('name'),names)<0){errorFound|=methods._validateField(field,options);if(errorFound&&first_err==null)
if(field.is(":hidden")&&options.prettySelect)
first_err=field=form.find("#"+options.usePrefix+methods._jqSelector(field.attr('id'))+options.useSuffix);else{if(field.data('jqv-prompt-at')instanceof jQuery){field=field.data('jqv-prompt-at');}else if(field.data('jqv-prompt-at')){field=$(field.data('jqv-prompt-at'));}
first_err=field;}
if(options.doNotShowAllErrosOnSubmit)
return false;names.push(field.attr('name'));if(options.showOneMessage==true&&errorFound){return false;}}});form.trigger("jqv.form.result",[errorFound]);if(errorFound){if(options.scroll){var destination=first_err.offset().top;var fixleft=first_err.offset().left;var positionType=options.promptPosition;if(typeof(positionType)=='string'&&positionType.indexOf(":")!=-1)
positionType=positionType.substring(0,positionType.indexOf(":"));if(positionType!="bottomRight"&&positionType!="bottomLeft"){var prompt_err=methods._getPrompt(first_err);if(prompt_err){destination=prompt_err.offset().top;}}
if(options.scrollOffset){destination-=options.scrollOffset;}
if(options.isOverflown){var overflowDIV=$(options.overflownDIV);if(!overflowDIV.length)return false;var scrollContainerScroll=overflowDIV.scrollTop();var scrollContainerPos=-parseInt(overflowDIV.offset().top);destination+=scrollContainerScroll+scrollContainerPos-5;var scrollContainer=$(options.overflownDIV+":not(:animated)");scrollContainer.animate({scrollTop:destination},1100,function(){if(options.focusFirstField)first_err.focus();});}else{$("html, body").animate({scrollTop:destination},1100,function(){if(options.focusFirstField)first_err.focus();});$("html, body").animate({scrollLeft:fixleft},1100)}}else if(options.focusFirstField)
first_err.focus();return false;}
return true;},_validateFormWithAjax:function(form,options){var data=form.serialize();var type=(options.ajaxFormValidationMethod)?options.ajaxFormValidationMethod:"GET";var url=(options.ajaxFormValidationURL)?options.ajaxFormValidationURL:form.attr("action");var dataType=(options.dataType)?options.dataType:"json";$.ajax({type:type,url:url,cache:false,dataType:dataType,data:data,form:form,methods:methods,options:options,beforeSend:function(){return options.onBeforeAjaxFormValidation(form,options);},error:function(data,transport){if(options.onFailure){options.onFailure(data,transport);}else{methods._ajaxError(data,transport);}},success:function(json){if((dataType=="json")&&(json!==true)){var errorInForm=false;for(var i=0;i<json.length;i++){var value=json[i];var errorFieldId=value[0];var errorField=$($("#"+errorFieldId)[0]);if(errorField.length==1){var msg=value[2];if(value[1]==true){if(msg==""||!msg){methods._closePrompt(errorField);}else{if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt)
msg=txt;}
if(options.showPrompts)methods._showPrompt(errorField,msg,"pass",false,options,true);}}else{errorInForm|=true;if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt)
msg=txt;}
if(options.showPrompts)methods._showPrompt(errorField,msg,"",false,options,true);}}}
options.onAjaxFormComplete(!errorInForm,form,json,options);}else
options.onAjaxFormComplete(true,form,json,options);}});},_validateField:function(field,options,skipAjaxValidation){if(!field.attr("id")){field.attr("id","form-validation-field-"+$.validationEngine.fieldIdCounter);++$.validationEngine.fieldIdCounter;}
if(!options.validateNonVisibleFields&&(field.is(":hidden")&&!options.prettySelect||field.parent().is(":hidden")))
return false;var rulesParsing=field.attr(options.validateAttribute);var getRules=/validate\[(.*)\]/.exec(rulesParsing);if(!getRules)
return false;var str=getRules[1];var rules=str.split(/\[|,|\]/);var isAjaxValidator=false;var fieldName=field.attr("name");var promptText="";var promptType="";var required=false;var limitErrors=false;options.isError=false;options.showArrow=true;if(options.maxErrorsPerField>0){limitErrors=true;}
var form=$(field.closest("form, .validationEngineContainer"));for(var i=0;i<rules.length;i++){rules[i]=rules[i].replace(" ","");if(rules[i]===''){delete rules[i];}}
for(var i=0,field_errors=0;i<rules.length;i++){if(limitErrors&&field_errors>=options.maxErrorsPerField){if(!required){var have_required=$.inArray('required',rules);required=(have_required!=-1&&have_required>=i);}
break;}
var errorMsg=undefined;switch(rules[i]){case"required":required=true;errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._required);break;case"custom":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._custom);break;case"groupRequired":var classGroup="["+options.validateAttribute+"*=\"groupRequired["+rules[i+1]+"\"]";var firstOfGroup=form.find(classGroup).eq(0);if(firstOfGroup[0]!=field[0]){methods._validateField(firstOfGroup,options,skipAjaxValidation);options.showArrow=true;}
errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._groupRequired);if(errorMsg)required=true;options.showArrow=false;break;case"ajax":errorMsg=methods._ajax(field,rules,i,options);if(errorMsg){promptType="load";}
break;case"minSize":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minSize);break;case"maxSize":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._maxSize);break;case"min":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._min);break;case"max":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._max);break;case"past":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._past);break;case"future":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._future);break;case"dateRange":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";options.firstOfGroup=form.find(classGroup).eq(0);options.secondOfGroup=form.find(classGroup).eq(1);if(options.firstOfGroup[0].value||options.secondOfGroup[0].value){errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dateRange);}
if(errorMsg)required=true;options.showArrow=false;break;case"dateTimeRange":var classGroup="["+options.validateAttribute+"*="+rules[i+1]+"]";options.firstOfGroup=form.find(classGroup).eq(0);options.secondOfGroup=form.find(classGroup).eq(1);if(options.firstOfGroup[0].value||options.secondOfGroup[0].value){errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._dateTimeRange);}
if(errorMsg)required=true;options.showArrow=false;break;case"maxCheckbox":field=$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._maxCheckbox);break;case"minCheckbox":field=$(form.find("input[name='"+fieldName+"']"));errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._minCheckbox);break;case"equals":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._equals);break;case"funcCall":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._funcCall);break;case"creditCard":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._creditCard);break;case"condRequired":errorMsg=methods._getErrorMessage(form,field,rules[i],rules,i,options,methods._condRequired);if(errorMsg!==undefined){required=true;}
break;default:}
var end_validation=false;if(typeof errorMsg=="object"){switch(errorMsg.status){case"_break":end_validation=true;break;case"_error":errorMsg=errorMsg.message;break;case"_error_no_prompt":return true;break;default:break;}}
if(end_validation){break;}
if(typeof errorMsg=='string'){promptText+=errorMsg+"<br/>";options.isError=true;field_errors++;}}
if(!required&&!(field.val())&&field.val().length<1&&rules.indexOf("equals")<0)options.isError=false;var fieldType=field.prop("type");var positionType=field.data("promptPosition")||options.promptPosition;if((fieldType=="radio"||fieldType=="checkbox")&&form.find("input[name='"+fieldName+"']").size()>1){if(positionType==='inline'){field=$(form.find("input[name='"+fieldName+"'][type!=hidden]:last"));}else{field=$(form.find("input[name='"+fieldName+"'][type!=hidden]:first"));}
options.showArrow=false;}
if(field.is(":hidden")&&options.prettySelect){field=form.find("#"+options.usePrefix+methods._jqSelector(field.attr('id'))+options.useSuffix);}
if(options.isError&&options.showPrompts){methods._showPrompt(field,promptText,promptType,false,options);}else{if(!isAjaxValidator)methods._closePrompt(field);}
if(!isAjaxValidator){field.trigger("jqv.field.result",[field,options.isError,promptText]);}
var errindex=$.inArray(field[0],options.InvalidFields);if(errindex==-1){if(options.isError)
options.InvalidFields.push(field[0]);}else if(!options.isError){options.InvalidFields.splice(errindex,1);}
methods._handleStatusCssClasses(field,options);if(options.isError&&options.onFieldFailure)
options.onFieldFailure(field);if(!options.isError&&options.onFieldSuccess)
options.onFieldSuccess(field);return options.isError;},_handleStatusCssClasses:function(field,options){if(options.addSuccessCssClassToField)
field.removeClass(options.addSuccessCssClassToField);if(options.addFailureCssClassToField)
field.removeClass(options.addFailureCssClassToField);if(options.addSuccessCssClassToField&&!options.isError)
field.addClass(options.addSuccessCssClassToField);if(options.addFailureCssClassToField&&options.isError)
field.addClass(options.addFailureCssClassToField);},_getErrorMessage:function(form,field,rule,rules,i,options,originalValidationMethod){var rule_index=jQuery.inArray(rule,rules);if(rule==="custom"||rule==="funcCall"){var custom_validation_type=rules[rule_index+1];rule=rule+"["+custom_validation_type+"]";delete(rules[rule_index]);}
var alteredRule=rule;var element_classes=(field.attr("data-validation-engine"))?field.attr("data-validation-engine"):field.attr("class");var element_classes_array=element_classes.split(" ");var errorMsg;if(rule=="future"||rule=="past"||rule=="maxCheckbox"||rule=="minCheckbox"){errorMsg=originalValidationMethod(form,field,rules,i,options);}else{errorMsg=originalValidationMethod(field,rules,i,options);}
if(errorMsg!=undefined){var custom_message=methods._getCustomErrorMessage($(field),element_classes_array,alteredRule,options);if(custom_message)errorMsg=custom_message;}
return errorMsg;},_getCustomErrorMessage:function(field,classes,rule,options){var custom_message=false;var validityProp=/^custom\[.*\]$/.test(rule)?methods._validityProp["custom"]:methods._validityProp[rule];if(validityProp!=undefined){custom_message=field.attr("data-errormessage-"+validityProp);if(custom_message!=undefined)
return custom_message;}
custom_message=field.attr("data-errormessage");if(custom_message!=undefined)
return custom_message;var id='#'+field.attr("id");if(typeof options.custom_error_messages[id]!="undefined"&&typeof options.custom_error_messages[id][rule]!="undefined"){custom_message=options.custom_error_messages[id][rule]['message'];}else if(classes.length>0){for(var i=0;i<classes.length&&classes.length>0;i++){var element_class="."+classes[i];if(typeof options.custom_error_messages[element_class]!="undefined"&&typeof options.custom_error_messages[element_class][rule]!="undefined"){custom_message=options.custom_error_messages[element_class][rule]['message'];break;}}}
if(!custom_message&&typeof options.custom_error_messages[rule]!="undefined"&&typeof options.custom_error_messages[rule]['message']!="undefined"){custom_message=options.custom_error_messages[rule]['message'];}
return custom_message;},_validityProp:{"required":"value-missing","custom":"custom-error","groupRequired":"value-missing","ajax":"custom-error","minSize":"range-underflow","maxSize":"range-overflow","min":"range-underflow","max":"range-overflow","past":"type-mismatch","future":"type-mismatch","dateRange":"type-mismatch","dateTimeRange":"type-mismatch","maxCheckbox":"range-overflow","minCheckbox":"range-underflow","equals":"pattern-mismatch","funcCall":"custom-error","creditCard":"pattern-mismatch","condRequired":"value-missing"},_required:function(field,rules,i,options,condRequired){switch(field.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var field_val=$.trim(field.val());var dv_placeholder=$.trim(field.attr("data-validation-placeholder"));var placeholder=$.trim(field.attr("placeholder"));if((!field_val)||(dv_placeholder&&field_val==dv_placeholder)||(placeholder&&field_val==placeholder)){return options.allrules[rules[i]].alertText;}
break;case"radio":case"checkbox":if(condRequired){if(!field.attr('checked')){return options.allrules[rules[i]].alertTextCheckboxMultiple;}
break;}
var form=field.closest("form, .validationEngineContainer");var name=field.attr("name");if(form.find("input[name='"+name+"']:checked").size()==0){if(form.find("input[name='"+name+"']:visible").size()==1)
return options.allrules[rules[i]].alertTextCheckboxe;else
return options.allrules[rules[i]].alertTextCheckboxMultiple;}
break;}},_groupRequired:function(field,rules,i,options){var classGroup="["+options.validateAttribute+"*=\"groupRequired["+rules[i+1]+"\"]";var isValid=false;field.closest("form, .validationEngineContainer").find(classGroup).each(function(){if(!methods._required($(this),rules,i,options)){isValid=true;return false;}});if(!isValid){return options.allrules[rules[i]].alertText;}},_custom:function(field,rules,i,options){var customRule=rules[i+1];var rule=options.allrules[customRule];var fn;if(!rule){alert("jqv:custom rule not found - "+customRule);return;}
if(rule["regex"]){var ex=rule.regex;if(!ex){alert("jqv:custom regex not found - "+customRule);return;}
var pattern=new RegExp(ex);if(!pattern.test(field.val()))return options.allrules[customRule].alertText;}else if(rule["func"]){fn=rule["func"];if(typeof(fn)!=="function"){alert("jqv:custom parameter 'function' is no function - "+customRule);return;}
if(!fn(field,rules,i,options))
return options.allrules[customRule].alertText;}else{alert("jqv:custom type not allowed "+customRule);return;}},_funcCall:function(field,rules,i,options){var functionName=rules[i+1];var fn;if(functionName.indexOf('.')>-1)
{var namespaces=functionName.split('.');var scope=window;while(namespaces.length)
{scope=scope[namespaces.shift()];}
fn=scope;}
else
fn=window[functionName]||options.customFunctions[functionName];if(typeof(fn)=='function')
return fn(field,rules,i,options);},_equals:function(field,rules,i,options){var equalsField=rules[i+1];if(field.val()!=field.closest('form').find('[name="'+equalsField+'"]').val())
return options.allrules.equals.alertText;},_maxSize:function(field,rules,i,options){var max=rules[i+1];var len=field.val().length;if(len>max){var rule=options.allrules.maxSize;return rule.alertText+max+rule.alertText2;}},_minSize:function(field,rules,i,options){var min=rules[i+1];var len=field.val().length;if(len<min){var rule=options.allrules.minSize;return rule.alertText+min+rule.alertText2;}},_min:function(field,rules,i,options){var min=parseFloat(rules[i+1]);var len=parseFloat(field.val());if(len<min){var rule=options.allrules.min;if(rule.alertText2)return rule.alertText+min+rule.alertText2;return rule.alertText+min;}},_max:function(field,rules,i,options){var max=parseFloat(rules[i+1]);var len=parseFloat(field.val());if(len>max){var rule=options.allrules.max;if(rule.alertText2)return rule.alertText+max+rule.alertText2;return rule.alertText+max;}},_past:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("*[name='"+p.replace(/^#+/,'')+"']"));var pdate;if(p.toLowerCase()=="now"){pdate=new Date();}else if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))
return;pdate=methods._parseDate(fieldAlt.val());}else{pdate=methods._parseDate(p);}
var vdate=methods._parseDate(field.val());if(vdate>pdate){var rule=options.allrules.past;if(rule.alertText2)return rule.alertText+methods._dateToString(pdate)+rule.alertText2;return rule.alertText+methods._dateToString(pdate);}},_future:function(form,field,rules,i,options){var p=rules[i+1];var fieldAlt=$(form.find("*[name='"+p.replace(/^#+/,'')+"']"));var pdate;if(p.toLowerCase()=="now"){pdate=new Date();}else if(undefined!=fieldAlt.val()){if(fieldAlt.is(":disabled"))
return;pdate=methods._parseDate(fieldAlt.val());}else{pdate=methods._parseDate(p);}
var vdate=methods._parseDate(field.val());if(vdate<pdate){var rule=options.allrules.future;if(rule.alertText2)
return rule.alertText+methods._dateToString(pdate)+rule.alertText2;return rule.alertText+methods._dateToString(pdate);}},_isDate:function(value){var dateRegEx=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return dateRegEx.test(value);},_isDateTime:function(value){var dateTimeRegEx=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return dateTimeRegEx.test(value);},_dateCompare:function(start,end){return(new Date(start.toString())<new Date(end.toString()));},_dateRange:function(field,rules,i,options){if((!options.firstOfGroup[0].value&&options.secondOfGroup[0].value)||(options.firstOfGroup[0].value&&!options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._isDate(options.firstOfGroup[0].value)||!methods._isDate(options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._dateCompare(options.firstOfGroup[0].value,options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}},_dateTimeRange:function(field,rules,i,options){if((!options.firstOfGroup[0].value&&options.secondOfGroup[0].value)||(options.firstOfGroup[0].value&&!options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._isDateTime(options.firstOfGroup[0].value)||!methods._isDateTime(options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}
if(!methods._dateCompare(options.firstOfGroup[0].value,options.secondOfGroup[0].value)){return options.allrules[rules[i]].alertText+options.allrules[rules[i]].alertText2;}},_maxCheckbox:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize>nbCheck){options.showArrow=false;if(options.allrules.maxCheckbox.alertText2)
return options.allrules.maxCheckbox.alertText+" "+nbCheck+" "+options.allrules.maxCheckbox.alertText2;return options.allrules.maxCheckbox.alertText;}},_minCheckbox:function(form,field,rules,i,options){var nbCheck=rules[i+1];var groupname=field.attr("name");var groupSize=form.find("input[name='"+groupname+"']:checked").size();if(groupSize<nbCheck){options.showArrow=false;return options.allrules.minCheckbox.alertText+" "+nbCheck+" "+options.allrules.minCheckbox.alertText2;}},_creditCard:function(field,rules,i,options){var valid=false,cardNumber=field.val().replace(/ +/g,'').replace(/-+/g,'');var numDigits=cardNumber.length;if(numDigits>=14&&numDigits<=16&&parseInt(cardNumber)>0){var sum=0,i=numDigits-1,pos=1,digit,luhn=new String();do{digit=parseInt(cardNumber.charAt(i));luhn+=(pos++%2==0)?digit*2:digit;}while(--i>=0)
for(i=0;i<luhn.length;i++){sum+=parseInt(luhn.charAt(i));}
valid=sum%10==0;}
if(!valid)return options.allrules.creditCard.alertText;},_ajax:function(field,rules,i,options){var errorSelector=rules[i+1];var rule=options.allrules[errorSelector];var extraData=rule.extraData;var extraDataDynamic=rule.extraDataDynamic;var data={"fieldId":field.attr("id"),"fieldValue":field.val()};if(typeof extraData==="object"){$.extend(data,extraData);}else if(typeof extraData==="string"){var tempData=extraData.split("&");for(var i=0;i<tempData.length;i++){var values=tempData[i].split("=");if(values[0]&&values[0]){data[values[0]]=values[1];}}}
if(extraDataDynamic){var tmpData=[];var domIds=String(extraDataDynamic).split(",");for(var i=0;i<domIds.length;i++){var id=domIds[i];if($(id).length){var inputValue=field.closest("form, .validationEngineContainer").find(id).val();var keyValue=id.replace('#','')+'='+escape(inputValue);data[id.replace('#','')]=inputValue;}}}
if(options.eventTrigger=="field"){delete(options.ajaxValidCache[field.attr("id")]);}
if(!options.isError&&!methods._checkAjaxFieldStatus(field.attr("id"),options)){$.ajax({type:options.ajaxFormValidationMethod,url:rule.url,cache:false,dataType:"json",data:data,field:field,rule:rule,methods:methods,options:options,beforeSend:function(){},error:function(data,transport){if(options.onFailure){options.onFailure(data,transport);}else{methods._ajaxError(data,transport);}},success:function(json){var errorFieldId=json[0];var errorField=$("#"+errorFieldId).eq(0);if(errorField.length==1){var status=json[1];var msg=json[2];if(!status){options.ajaxValidCache[errorFieldId]=false;options.isError=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertText;if(txt){msg=txt;}}}
else
msg=rule.alertText;if(options.showPrompts)methods._showPrompt(errorField,msg,"",true,options);}else{options.ajaxValidCache[errorFieldId]=true;if(msg){if(options.allrules[msg]){var txt=options.allrules[msg].alertTextOk;if(txt){msg=txt;}}}
else
msg=rule.alertTextOk;if(options.showPrompts){if(msg)
methods._showPrompt(errorField,msg,"pass",true,options);else
methods._closePrompt(errorField);}
if(options.eventTrigger=="submit")
field.closest("form").submit();}}
errorField.trigger("jqv.field.result",[errorField,options.isError,msg]);}});return rule.alertTextLoad;}},_ajaxError:function(data,transport){if(data.status==0&&transport==null)
alert("The page is not served from a server! ajax call failed");else if(typeof console!="undefined")
console.log("Ajax error: "+data.status+" "+transport);},_dateToString:function(date){return date.getFullYear()+"-"+(date.getMonth()+1)+"-"+date.getDate();},_parseDate:function(d){var dateParts=d.split("-");if(dateParts==d)
dateParts=d.split("/");if(dateParts==d){dateParts=d.split(".");return new Date(dateParts[2],(dateParts[1]-1),dateParts[0]);}
if(dateParts[2]&&dateParts[2].length>=4)
return new Date(dateParts[2],(dateParts[0]-1),dateParts[1]);return new Date(dateParts[0],(dateParts[1]-1),dateParts[2]);},_showPrompt:function(field,promptText,type,ajaxed,options,ajaxform){if(field.data('jqv-prompt-at')instanceof jQuery){field=field.data('jqv-prompt-at');}else if(field.data('jqv-prompt-at')){field=$(field.data('jqv-prompt-at'));}
if($('html').is('.ui-mobile')){options.scroll=false;options.showOneMessage=true;var fieldLabel=field.closest('.field').find('label:first').text().replace(/\*|\r|\n/mg,' ');if(!fieldLabel)
fieldLabel=field.attr('name');alert(fieldLabel+$('<div>'+promptText.replace(/\*/g,"\r\n ")+'</div>').text());return;}
var prompt=methods._getPrompt(field);if(ajaxform)prompt=false;if($.trim(promptText)){if(prompt)
methods._updatePrompt(field,prompt,promptText,type,ajaxed,options);else
methods._buildPrompt(field,promptText,type,ajaxed,options);}},_buildPrompt:function(field,promptText,type,ajaxed,options){var prompt=$('<div>');prompt.addClass(methods._getClassName(field.attr("id"))+"formError");prompt.addClass("parentForm"+methods._getClassName(field.closest('form, .validationEngineContainer').attr("id")));prompt.addClass("formError");switch(type){case"pass":prompt.addClass("greenPopup");break;case"load":prompt.addClass("blackPopup");break;default:}
if(ajaxed)
prompt.addClass("ajaxed");var promptContent=$('<div>').addClass("formErrorContent").html(promptText).appendTo(prompt);var positionType=field.data("promptPosition")||options.promptPosition;if(options.showArrow){var arrow=$('<div>').addClass("formErrorArrow");if(typeof(positionType)=='string')
{var pos=positionType.indexOf(":");if(pos!=-1)
positionType=positionType.substring(0,pos);}
switch(positionType){case"bottomLeft":case"bottomRight":prompt.find(".formErrorContent").before(arrow);arrow.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":arrow.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');prompt.append(arrow);break;}}
if(options.addPromptClass)
prompt.addClass(options.addPromptClass);var requiredOverride=field.attr('data-required-class');if(requiredOverride!==undefined){prompt.addClass(requiredOverride);}else{if(options.prettySelect){if($('#'+field.attr('id')).next().is('select')){var prettyOverrideClass=$('#'+field.attr('id').substr(options.usePrefix.length).substring(options.useSuffix.length)).attr('data-required-class');if(prettyOverrideClass!==undefined){prompt.addClass(prettyOverrideClass);}}}}
prompt.css({"opacity":0});if(positionType==='inline'){prompt.addClass("inline");if(typeof field.attr('data-prompt-target')!=='undefined'&&$('#'+field.attr('data-prompt-target')).length>0){prompt.appendTo($('#'+field.attr('data-prompt-target')));}else{field.after(prompt);}}else{field.before(prompt);}
var pos=methods._calculatePosition(field,prompt,options);prompt.css({'position':positionType==='inline'?'relative':'absolute',"top":pos.callerTopPosition,"left":pos.callerleftPosition,"marginTop":pos.marginTopSize,"opacity":0}).data("callerField",field);if(options.autoHidePrompt){setTimeout(function(){prompt.animate({"opacity":0},function(){prompt.closest('.formErrorOuter').remove();prompt.remove();});},options.autoHideDelay);}
return prompt.animate({"opacity":1.0});},_updatePrompt:function(field,prompt,promptText,type,ajaxed,options,noAnimation){if(prompt){if(typeof type!=="undefined"){if(type=="pass")
prompt.addClass("greenPopup");else
prompt.removeClass("greenPopup");if(type=="load")
prompt.addClass("blackPopup");else
prompt.removeClass("blackPopup");}
if(ajaxed)
prompt.addClass("ajaxed");else
prompt.removeClass("ajaxed");prompt.find(".formErrorContent").html(promptText);var pos=methods._calculatePosition(field,prompt,options);var css={"top":pos.callerTopPosition,"left":pos.callerleftPosition,"marginTop":pos.marginTopSize};if(noAnimation)
prompt.css(css);else
prompt.animate(css);}},_closePrompt:function(field){var prompt=methods._getPrompt(field);if(prompt)
prompt.fadeTo("fast",0,function(){prompt.parent('.formErrorOuter').remove();prompt.remove();});},closePrompt:function(field){return methods._closePrompt(field);},_getPrompt:function(field){var formId=$(field).closest('form, .validationEngineContainer').attr('id');var className=methods._getClassName(field.attr("id"))+"formError";var match=$("."+methods._escapeExpression(className)+'.parentForm'+methods._getClassName(formId))[0];if(match)
return $(match);},_escapeExpression:function(selector){return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1");},isRTL:function(field)
{var $document=$(document);var $body=$('body');var rtl=(field&&field.hasClass('rtl'))||(field&&(field.attr('dir')||'').toLowerCase()==='rtl')||$document.hasClass('rtl')||($document.attr('dir')||'').toLowerCase()==='rtl'||$body.hasClass('rtl')||($body.attr('dir')||'').toLowerCase()==='rtl';return Boolean(rtl);},_calculatePosition:function(field,promptElmt,options){var promptTopPosition,promptleftPosition,marginTopSize;var fieldWidth=field.outerWidth();var fieldLeft=field.position().left;var fieldTop=field.position().top;var fieldHeight=field.outerHeight();var promptHeight=promptElmt.height();var promptWidth=promptElmt.width();promptTopPosition=promptleftPosition=0;marginTopSize=-promptHeight;var positionType=field.data("promptPosition")||options.promptPosition;var shift1="";var shift2="";var shiftX=0;var shiftY=0;if(typeof(positionType)=='string'){if(positionType.indexOf(":")!=-1){shift1=positionType.substring(positionType.indexOf(":")+1);positionType=positionType.substring(0,positionType.indexOf(":"));if(shift1.indexOf(",")!=-1){shift2=shift1.substring(shift1.indexOf(",")+1);shift1=shift1.substring(0,shift1.indexOf(","));shiftY=parseInt(shift2);if(isNaN(shiftY))shiftY=0;};shiftX=parseInt(shift1);if(isNaN(shift1))shift1=0;};};switch(positionType){default:case"topRight":promptleftPosition+=fieldLeft+fieldWidth-(fieldWidth>30?30:fieldWidth)-(fieldWidth>promptWidth?promptWidth-30:0);promptTopPosition+=fieldTop;break;case"topLeft":promptTopPosition+=fieldTop;promptleftPosition+=fieldLeft;break;case"centerRight":promptTopPosition=fieldTop+4;marginTopSize=0;promptleftPosition=fieldLeft+field.outerWidth(true)+5;break;case"centerLeft":promptleftPosition=fieldLeft-(promptElmt.width()+2);promptTopPosition=fieldTop+4;marginTopSize=0;break;case"bottomLeft":promptTopPosition=fieldTop+fieldHeight+5;marginTopSize=0;promptleftPosition=fieldLeft;break;case"bottomRight":promptleftPosition=fieldLeft+fieldWidth-(fieldWidth>30?30:fieldWidth)-(fieldWidth>promptWidth?promptWidth-30:0);promptTopPosition=fieldTop+fieldHeight+5;marginTopSize=0;break;case"inline":promptleftPosition=0;promptTopPosition=0;marginTopSize=0;};promptleftPosition+=shiftX;promptTopPosition+=shiftY;var maxWidth=$(document).scrollLeft()+$(window).width();var actualWidth=promptElmt.width();var offset=field.offset();if(promptleftPosition<offset.left&&offset.left+promptleftPosition+actualWidth>maxWidth)
promptleftPosition=promptleftPosition-((offset.left+promptleftPosition+actualWidth)-maxWidth);return{"callerTopPosition":promptTopPosition+"px","callerleftPosition":promptleftPosition+"px","marginTopSize":marginTopSize+"px"};},_saveOptions:function(form,options){if($.validationEngineLanguage)
var allRules=$.validationEngineLanguage.allRules;else
$.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");$.validationEngine.defaults.allrules=allRules;var userOptions=$.extend(true,{},$.validationEngine.defaults,options);form.data('jqv',userOptions);return userOptions;},_getClassName:function(className){if(className)
return className.replace(/:/g,"_").replace(/\./g,"_");},_jqSelector:function(str){return str.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1');},_condRequired:function(field,rules,i,options){var idx,dependingField;for(idx=(i+1);idx<rules.length;idx++){dependingField=field.closest('form').find('[name="'+rules[idx]+'"]').first();if(dependingField.length&&methods._required(dependingField,["required"],0,options,true)==undefined){return methods._required(field,["required"],0,options);}}},_submitButtonClick:function(event){var button=$(this);var form=button.closest('form, .validationEngineContainer');form.data("jqv_submitButton",button.attr("id"));}};$.fn.validationEngine=function(method){var form=$(this);if(!form[0])return form;if(typeof(method)=='string'&&method.charAt(0)!='_'&&methods[method]){if(method!="showPrompt"&&method!="hide"&&method!="hideAll")
methods.init.apply(form);return methods[method].apply(form,Array.prototype.slice.call(arguments,1));}else if(typeof method=='object'||!method){methods.init.apply(form,arguments);return methods.attach.apply(form);}else{$.error('Method '+method+' does not exist in jQuery.validationEngine');}};$.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:'get',onAjaxFormComplete:$.noop,onBeforeAjaxFormValidation:$.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:false,autoHideDelay:10000,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};$(function(){$.validationEngine.defaults.promptPosition=methods.isRTL()?'topLeft':"topRight"});})(jQuery);;(function(factory){if(typeof module==="object"&&module.exports){module.exports=factory(require("jquery"));}else if(typeof define==="function"&&define.amd){define(["jquery"],function($){factory($);});}else factory(jQuery);})(function($,undefined){"use strict";var allCountries=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan ()","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["Macedonia (FYROM) ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco ()","ma","212",0],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262",0],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara ( )","eh","212",1,["5288","5289"]],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["land Islands","ax","358",1,["18"]]];for(var i=0;i<allCountries.length;i++){var c=allCountries[i];allCountries[i]={name:c[0],iso2:c[1],dialCode:c[2],priority:c[3]||0,areaCodes:c[4]||null};}"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var intlTelInputGlobals={getInstance:function getInstance(input){var id=input.getAttribute("data-intl-tel-input-id");return window.intlTelInputGlobals.instances[id];},instances:{},documentReady:function documentReady(){return document.readyState==="complete";}};if(typeof window==="object")window.intlTelInputGlobals=intlTelInputGlobals;var id=0;var defaults={allowDropdown:true,autoHideDialCode:true,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:true,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:true,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:false,utilsScript:""};var regionlessNanpNumbers=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];var forEachProp=function forEachProp(obj,callback){var keys=Object.keys(obj);for(var i=0;i<keys.length;i++){callback(keys[i],obj[keys[i]]);}};var forEachInstance=function forEachInstance(method){forEachProp(window.intlTelInputGlobals.instances,function(key){window.intlTelInputGlobals.instances[key][method]();});};var Iti=function(){function Iti(input,options){var _this=this;_classCallCheck(this,Iti);this.id=id++;this.telInput=input;this.activeItem=null;this.highlightedItem=null;var customOptions=options||{};this.options={};forEachProp(defaults,function(key,value){_this.options[key]=customOptions.hasOwnProperty(key)?customOptions[key]:value;});this.hadInitialPlaceholder=Boolean(input.getAttribute("placeholder"));}
_createClass(Iti,[{key:"_init",value:function _init(){var _this2=this;if(this.options.nationalMode)this.options.autoHideDialCode=false;if(this.options.separateDialCode){this.options.autoHideDialCode=this.options.nationalMode=false;}
this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(this.isMobile){document.body.classList.add("iti-mobile");if(!this.options.dropdownContainer)this.options.dropdownContainer=document.body;}
if(typeof Promise!=="undefined"){var autoCountryPromise=new Promise(function(resolve,reject){_this2.resolveAutoCountryPromise=resolve;_this2.rejectAutoCountryPromise=reject;});var utilsScriptPromise=new Promise(function(resolve,reject){_this2.resolveUtilsScriptPromise=resolve;_this2.rejectUtilsScriptPromise=reject;});this.promise=Promise.all([autoCountryPromise,utilsScriptPromise]);}else{this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){};this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};}
this.selectedCountryData={};this._processCountryData();this._generateMarkup();this._setInitialState();this._initListeners();this._initRequests();}},{key:"_processCountryData",value:function _processCountryData(){this._processAllCountries();this._processCountryCodes();this._processPreferredCountries();if(this.options.localizedCountries)this._translateCountriesByLocale();if(this.options.onlyCountries.length||this.options.localizedCountries){this.countries.sort(this._countryNameSort);}}},{key:"_addCountryCode",value:function _addCountryCode(iso2,countryCode,priority){if(countryCode.length>this.countryCodeMaxLen){this.countryCodeMaxLen=countryCode.length;}
if(!this.countryCodes.hasOwnProperty(countryCode)){this.countryCodes[countryCode]=[];}
for(var i=0;i<this.countryCodes[countryCode].length;i++){if(this.countryCodes[countryCode][i]===iso2)return;}
var index=priority!==undefined?priority:this.countryCodes[countryCode].length;this.countryCodes[countryCode][index]=iso2;}},{key:"_processAllCountries",value:function _processAllCountries(){if(this.options.onlyCountries.length){var lowerCaseOnlyCountries=this.options.onlyCountries.map(function(country){return country.toLowerCase();});this.countries=allCountries.filter(function(country){return lowerCaseOnlyCountries.indexOf(country.iso2)>-1;});}else if(this.options.excludeCountries.length){var lowerCaseExcludeCountries=this.options.excludeCountries.map(function(country){return country.toLowerCase();});this.countries=allCountries.filter(function(country){return lowerCaseExcludeCountries.indexOf(country.iso2)===-1;});}else{this.countries=allCountries;}}},{key:"_translateCountriesByLocale",value:function _translateCountriesByLocale(){for(var i=0;i<this.countries.length;i++){var iso=this.countries[i].iso2.toLowerCase();if(this.options.localizedCountries.hasOwnProperty(iso)){this.countries[i].name=this.options.localizedCountries[iso];}}}},{key:"_countryNameSort",value:function _countryNameSort(a,b){return a.name.localeCompare(b.name);}},{key:"_processCountryCodes",value:function _processCountryCodes(){this.countryCodeMaxLen=0;this.dialCodes={};this.countryCodes={};for(var i=0;i<this.countries.length;i++){var c=this.countries[i];if(!this.dialCodes[c.dialCode])this.dialCodes[c.dialCode]=true;this._addCountryCode(c.iso2,c.dialCode,c.priority);}
for(var _i=0;_i<this.countries.length;_i++){var _c=this.countries[_i];if(_c.areaCodes){var rootCountryCode=this.countryCodes[_c.dialCode][0];for(var j=0;j<_c.areaCodes.length;j++){var areaCode=_c.areaCodes[j];for(var k=1;k<areaCode.length;k++){var partialDialCode=_c.dialCode+areaCode.substr(0,k);this._addCountryCode(rootCountryCode,partialDialCode);this._addCountryCode(_c.iso2,partialDialCode);}
this._addCountryCode(_c.iso2,_c.dialCode+areaCode);}}}}},{key:"_processPreferredCountries",value:function _processPreferredCountries(){this.preferredCountries=[];for(var i=0;i<this.options.preferredCountries.length;i++){var countryCode=this.options.preferredCountries[i].toLowerCase();var countryData=this._getCountryData(countryCode,false,true);if(countryData)this.preferredCountries.push(countryData);}}},{key:"_createEl",value:function _createEl(name,attrs,container){var el=document.createElement(name);if(attrs)forEachProp(attrs,function(key,value){return el.setAttribute(key,value);});if(container)container.appendChild(el);return el;}},{key:"_generateMarkup",value:function _generateMarkup(){if(!this.telInput.hasAttribute("autocomplete")&&!(this.telInput.form&&this.telInput.form.hasAttribute("autocomplete"))){this.telInput.setAttribute("autocomplete","off");}
var parentClass="iti";if(this.options.allowDropdown)parentClass+=" iti--allow-dropdown";if(this.options.separateDialCode)parentClass+=" iti--separate-dial-code";if(this.options.customContainer){parentClass+=" ";parentClass+=this.options.customContainer;}
var wrapper=this._createEl("div",{"class":parentClass});this.telInput.parentNode.insertBefore(wrapper,this.telInput);this.flagsContainer=this._createEl("div",{"class":"iti__flag-container"},wrapper);wrapper.appendChild(this.telInput);this.selectedFlag=this._createEl("div",{"class":"iti__selected-flag",role:"combobox","aria-controls":"iti-".concat(this.id,"__country-listbox"),"aria-owns":"iti-".concat(this.id,"__country-listbox"),"aria-expanded":"false"},this.flagsContainer);this.selectedFlagInner=this._createEl("div",{"class":"iti__flag"},this.selectedFlag);if(this.options.separateDialCode){this.selectedDialCode=this._createEl("div",{"class":"iti__selected-dial-code"},this.selectedFlag);}
if(this.options.allowDropdown){this.selectedFlag.setAttribute("tabindex","0");this.dropdownArrow=this._createEl("div",{"class":"iti__arrow"},this.selectedFlag);this.countryList=this._createEl("ul",{"class":"iti__country-list iti__hide",id:"iti-".concat(this.id,"__country-listbox"),role:"listbox","aria-label":"List of countries"});if(this.preferredCountries.length){this._appendListItems(this.preferredCountries,"iti__preferred",true);this._createEl("li",{"class":"iti__divider",role:"separator","aria-disabled":"true"},this.countryList);}
this._appendListItems(this.countries,"iti__standard");if(this.options.dropdownContainer){this.dropdown=this._createEl("div",{"class":"iti iti--container"});this.dropdown.appendChild(this.countryList);}else{this.flagsContainer.appendChild(this.countryList);}}
if(this.options.hiddenInput){var hiddenInputName=this.options.hiddenInput;var name=this.telInput.getAttribute("name");if(name){var i=name.lastIndexOf("[");if(i!==-1)hiddenInputName="".concat(name.substr(0,i),"[").concat(hiddenInputName,"]");}
this.hiddenInput=this._createEl("input",{type:"hidden",name:hiddenInputName});wrapper.appendChild(this.hiddenInput);}}},{key:"_appendListItems",value:function _appendListItems(countries,className,preferred){var tmp="";for(var i=0;i<countries.length;i++){var c=countries[i];var idSuffix=preferred?"-preferred":"";tmp+="<li class='iti__country ".concat(className,"' tabIndex='-1' id='iti-").concat(this.id,"__item-").concat(c.iso2).concat(idSuffix,"' role='option' data-dial-code='").concat(c.dialCode,"' data-country-code='").concat(c.iso2,"' aria-selected='false'>");tmp+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(c.iso2,"'></div></div>");tmp+="<span class='iti__country-name'>".concat(c.name,"</span>");tmp+="<span class='iti__dial-code'>+".concat(c.dialCode,"</span>");tmp+="</li>";}
this.countryList.insertAdjacentHTML("beforeend",tmp);}},{key:"_setInitialState",value:function _setInitialState(){var val=this.telInput.value;var dialCode=this._getDialCode(val);var isRegionlessNanp=this._isRegionlessNanp(val);var _this$options=this.options,initialCountry=_this$options.initialCountry,nationalMode=_this$options.nationalMode,autoHideDialCode=_this$options.autoHideDialCode,separateDialCode=_this$options.separateDialCode;if(dialCode&&!isRegionlessNanp){this._updateFlagFromNumber(val);}else if(initialCountry!=="auto"){if(initialCountry){this._setFlag(initialCountry.toLowerCase());}else{if(dialCode&&isRegionlessNanp){this._setFlag("us");}else{this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2;if(!val){this._setFlag(this.defaultCountry);}}}
if(!val&&!nationalMode&&!autoHideDialCode&&!separateDialCode){this.telInput.value="+".concat(this.selectedCountryData.dialCode);}}
if(val)this._updateValFromNumber(val);}},{key:"_initListeners",value:function _initListeners(){this._initKeyListeners();if(this.options.autoHideDialCode)this._initBlurListeners();if(this.options.allowDropdown)this._initDropdownListeners();if(this.hiddenInput)this._initHiddenInputListener();}},{key:"_initHiddenInputListener",value:function _initHiddenInputListener(){var _this3=this;this._handleHiddenInputSubmit=function(){_this3.hiddenInput.value=_this3.getNumber();};if(this.telInput.form)this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit);}},{key:"_getClosestLabel",value:function _getClosestLabel(){var el=this.telInput;while(el&&el.tagName!=="LABEL"){el=el.parentNode;}
return el;}},{key:"_initDropdownListeners",value:function _initDropdownListeners(){var _this4=this;this._handleLabelClick=function(e){if(_this4.countryList.classList.contains("iti__hide"))_this4.telInput.focus();else e.preventDefault();};var label=this._getClosestLabel();if(label)label.addEventListener("click",this._handleLabelClick);this._handleClickSelectedFlag=function(){if(_this4.countryList.classList.contains("iti__hide")&&!_this4.telInput.disabled&&!_this4.telInput.readOnly){_this4._showDropdown();}};this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag);this._handleFlagsContainerKeydown=function(e){var isDropdownHidden=_this4.countryList.classList.contains("iti__hide");if(isDropdownHidden&&["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(e.key)!==-1){e.preventDefault();e.stopPropagation();_this4._showDropdown();}
if(e.key==="Tab")_this4._closeDropdown();};this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown);}},{key:"_initRequests",value:function _initRequests(){var _this5=this;if(this.options.utilsScript&&!window.intlTelInputUtils){if(window.intlTelInputGlobals.documentReady()){window.intlTelInputGlobals.loadUtils(this.options.utilsScript);}else{window.addEventListener("load",function(){window.intlTelInputGlobals.loadUtils(_this5.options.utilsScript);});}}else this.resolveUtilsScriptPromise();if(this.options.initialCountry==="auto")this._loadAutoCountry();else this.resolveAutoCountryPromise();}},{key:"_loadAutoCountry",value:function _loadAutoCountry(){if(window.intlTelInputGlobals.autoCountry){this.handleAutoCountry();}else if(!window.intlTelInputGlobals.startedLoadingAutoCountry){window.intlTelInputGlobals.startedLoadingAutoCountry=true;if(typeof this.options.geoIpLookup==="function"){this.options.geoIpLookup(function(countryCode){window.intlTelInputGlobals.autoCountry=countryCode.toLowerCase();setTimeout(function(){return forEachInstance("handleAutoCountry");});},function(){return forEachInstance("rejectAutoCountryPromise");});}}}},{key:"_initKeyListeners",value:function _initKeyListeners(){var _this6=this;this._handleKeyupEvent=function(){if(_this6._updateFlagFromNumber(_this6.telInput.value)){_this6._triggerCountryChange();}};this.telInput.addEventListener("keyup",this._handleKeyupEvent);this._handleClipboardEvent=function(){setTimeout(_this6._handleKeyupEvent);};this.telInput.addEventListener("cut",this._handleClipboardEvent);this.telInput.addEventListener("paste",this._handleClipboardEvent);}},{key:"_cap",value:function _cap(number){var max=this.telInput.getAttribute("maxlength");return max&&number.length>max?number.substr(0,max):number;}},{key:"_initBlurListeners",value:function _initBlurListeners(){var _this7=this;this._handleSubmitOrBlurEvent=function(){_this7._removeEmptyDialCode();};if(this.telInput.form)this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent);this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent);}},{key:"_removeEmptyDialCode",value:function _removeEmptyDialCode(){if(this.telInput.value.charAt(0)==="+"){var numeric=this._getNumeric(this.telInput.value);if(!numeric||this.selectedCountryData.dialCode===numeric){this.telInput.value="";}}}},{key:"_getNumeric",value:function _getNumeric(s){return s.replace(/\D/g,"");}},{key:"_trigger",value:function _trigger(name){var e=document.createEvent("Event");e.initEvent(name,true,true);this.telInput.dispatchEvent(e);}},{key:"_showDropdown",value:function _showDropdown(){this.countryList.classList.remove("iti__hide");this.selectedFlag.setAttribute("aria-expanded","true");this._setDropdownPosition();if(this.activeItem){this._highlightListItem(this.activeItem,false);this._scrollTo(this.activeItem,true);}
this._bindDropdownListeners();this.dropdownArrow.classList.add("iti__arrow--up");this._trigger("open:countrydropdown");}},{key:"_toggleClass",value:function _toggleClass(el,className,shouldHaveClass){if(shouldHaveClass&&!el.classList.contains(className))el.classList.add(className);else if(!shouldHaveClass&&el.classList.contains(className))el.classList.remove(className);}},{key:"_setDropdownPosition",value:function _setDropdownPosition(){var _this8=this;if(this.options.dropdownContainer){this.options.dropdownContainer.appendChild(this.dropdown);}
if(!this.isMobile){var pos=this.telInput.getBoundingClientRect();var windowTop=window.pageYOffset||document.documentElement.scrollTop;var inputTop=pos.top+windowTop;var dropdownHeight=this.countryList.offsetHeight;var dropdownFitsBelow=inputTop+this.telInput.offsetHeight+dropdownHeight<windowTop+window.innerHeight;var dropdownFitsAbove=inputTop-dropdownHeight>windowTop;this._toggleClass(this.countryList,"iti__country-list--dropup",!dropdownFitsBelow&&dropdownFitsAbove);if(this.options.dropdownContainer){var extraTop=!dropdownFitsBelow&&dropdownFitsAbove?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(inputTop+extraTop,"px");this.dropdown.style.left="".concat(pos.left+document.body.scrollLeft,"px");this._handleWindowScroll=function(){return _this8._closeDropdown();};window.addEventListener("scroll",this._handleWindowScroll);}}}},{key:"_getClosestListItem",value:function _getClosestListItem(target){var el=target;while(el&&el!==this.countryList&&!el.classList.contains("iti__country")){el=el.parentNode;}
return el===this.countryList?null:el;}},{key:"_bindDropdownListeners",value:function _bindDropdownListeners(){var _this9=this;this._handleMouseoverCountryList=function(e){var listItem=_this9._getClosestListItem(e.target);if(listItem)_this9._highlightListItem(listItem,false);};this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList);this._handleClickCountryList=function(e){var listItem=_this9._getClosestListItem(e.target);if(listItem)_this9._selectListItem(listItem);};this.countryList.addEventListener("click",this._handleClickCountryList);var isOpening=true;this._handleClickOffToClose=function(){if(!isOpening)_this9._closeDropdown();isOpening=false;};document.documentElement.addEventListener("click",this._handleClickOffToClose);var query="";var queryTimer=null;this._handleKeydownOnDropdown=function(e){e.preventDefault();if(e.key==="ArrowUp"||e.key==="Up"||e.key==="ArrowDown"||e.key==="Down")_this9._handleUpDownKey(e.key);else if(e.key==="Enter")_this9._handleEnterKey();else if(e.key==="Escape")_this9._closeDropdown();else if(/^[a-zA-Z--- ]$/.test(e.key)){if(queryTimer)clearTimeout(queryTimer);query+=e.key.toLowerCase();_this9._searchForCountry(query);queryTimer=setTimeout(function(){query="";},1e3);}};document.addEventListener("keydown",this._handleKeydownOnDropdown);}},{key:"_handleUpDownKey",value:function _handleUpDownKey(key){var next=key==="ArrowUp"||key==="Up"?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;if(next){if(next.classList.contains("iti__divider")){next=key==="ArrowUp"||key==="Up"?next.previousElementSibling:next.nextElementSibling;}
this._highlightListItem(next,true);}}},{key:"_handleEnterKey",value:function _handleEnterKey(){if(this.highlightedItem)this._selectListItem(this.highlightedItem);}},{key:"_searchForCountry",value:function _searchForCountry(query){for(var i=0;i<this.countries.length;i++){if(this._startsWith(this.countries[i].name,query)){var listItem=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(this.countries[i].iso2));this._highlightListItem(listItem,false);this._scrollTo(listItem,true);break;}}}},{key:"_startsWith",value:function _startsWith(a,b){return a.substr(0,b.length).toLowerCase()===b;}},{key:"_updateValFromNumber",value:function _updateValFromNumber(originalNumber){var number=originalNumber;if(this.options.formatOnDisplay&&window.intlTelInputUtils&&this.selectedCountryData){var useNational=!this.options.separateDialCode&&(this.options.nationalMode||number.charAt(0)!=="+");var _intlTelInputUtils$nu=intlTelInputUtils.numberFormat,NATIONAL=_intlTelInputUtils$nu.NATIONAL,INTERNATIONAL=_intlTelInputUtils$nu.INTERNATIONAL;var format=useNational?NATIONAL:INTERNATIONAL;number=intlTelInputUtils.formatNumber(number,this.selectedCountryData.iso2,format);}
number=this._beforeSetNumber(number);this.telInput.value=number;}},{key:"_updateFlagFromNumber",value:function _updateFlagFromNumber(originalNumber){var number=originalNumber;var selectedDialCode=this.selectedCountryData.dialCode;var isNanp=selectedDialCode==="1";if(number&&this.options.nationalMode&&isNanp&&number.charAt(0)!=="+"){if(number.charAt(0)!=="1")number="1".concat(number);number="+".concat(number);}
if(this.options.separateDialCode&&selectedDialCode&&number.charAt(0)!=="+"){number="+".concat(selectedDialCode).concat(number);}
var dialCode=this._getDialCode(number,true);var numeric=this._getNumeric(number);var countryCode=null;if(dialCode){var countryCodes=this.countryCodes[this._getNumeric(dialCode)];var alreadySelected=countryCodes.indexOf(this.selectedCountryData.iso2)!==-1&&numeric.length<=dialCode.length-1;var isRegionlessNanpNumber=selectedDialCode==="1"&&this._isRegionlessNanp(numeric);if(!isRegionlessNanpNumber&&!alreadySelected){for(var j=0;j<countryCodes.length;j++){if(countryCodes[j]){countryCode=countryCodes[j];break;}}}}else if(number.charAt(0)==="+"&&numeric.length){countryCode="";}else if(!number||number==="+"){countryCode=this.defaultCountry;}
if(countryCode!==null){return this._setFlag(countryCode);}
return false;}},{key:"_isRegionlessNanp",value:function _isRegionlessNanp(number){var numeric=this._getNumeric(number);if(numeric.charAt(0)==="1"){var areaCode=numeric.substr(1,3);return regionlessNanpNumbers.indexOf(areaCode)!==-1;}
return false;}},{key:"_highlightListItem",value:function _highlightListItem(listItem,shouldFocus){var prevItem=this.highlightedItem;if(prevItem)prevItem.classList.remove("iti__highlight");this.highlightedItem=listItem;this.highlightedItem.classList.add("iti__highlight");if(shouldFocus)this.highlightedItem.focus();}},{key:"_getCountryData",value:function _getCountryData(countryCode,ignoreOnlyCountriesOption,allowFail){var countryList=ignoreOnlyCountriesOption?allCountries:this.countries;for(var i=0;i<countryList.length;i++){if(countryList[i].iso2===countryCode){return countryList[i];}}
if(allowFail){return null;}
throw new Error("No country data for '".concat(countryCode,"'"));}},{key:"_setFlag",value:function _setFlag(countryCode){var prevCountry=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=countryCode?this._getCountryData(countryCode,false,false):{};if(this.selectedCountryData.iso2){this.defaultCountry=this.selectedCountryData.iso2;}
this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(countryCode));var title=countryCode?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";this.selectedFlag.setAttribute("title",title);if(this.options.separateDialCode){var dialCode=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=dialCode;var selectedFlagWidth=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(selectedFlagWidth+6,"px");}
this._updatePlaceholder();if(this.options.allowDropdown){var prevItem=this.activeItem;if(prevItem){prevItem.classList.remove("iti__active");prevItem.setAttribute("aria-selected","false");}
if(countryCode){var nextItem=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(countryCode,"-preferred"))||this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(countryCode));nextItem.setAttribute("aria-selected","true");nextItem.classList.add("iti__active");this.activeItem=nextItem;this.selectedFlag.setAttribute("aria-activedescendant",nextItem.getAttribute("id"));}}
return prevCountry.iso2!==countryCode;}},{key:"_getHiddenSelectedFlagWidth",value:function _getHiddenSelectedFlagWidth(){var containerClone=this.telInput.parentNode.cloneNode();containerClone.style.visibility="hidden";document.body.appendChild(containerClone);var flagsContainerClone=this.flagsContainer.cloneNode();containerClone.appendChild(flagsContainerClone);var selectedFlagClone=this.selectedFlag.cloneNode(true);flagsContainerClone.appendChild(selectedFlagClone);var width=selectedFlagClone.offsetWidth;containerClone.parentNode.removeChild(containerClone);return width;}},{key:"_updatePlaceholder",value:function _updatePlaceholder(){var shouldSetPlaceholder=this.options.autoPlaceholder==="aggressive"||!this.hadInitialPlaceholder&&this.options.autoPlaceholder==="polite";if(window.intlTelInputUtils&&shouldSetPlaceholder){var numberType=intlTelInputUtils.numberType[this.options.placeholderNumberType];var placeholder=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,numberType):"";placeholder=this._beforeSetNumber(placeholder);if(typeof this.options.customPlaceholder==="function"){placeholder=this.options.customPlaceholder(placeholder,this.selectedCountryData);}
this.telInput.setAttribute("placeholder",placeholder);}}},{key:"_selectListItem",value:function _selectListItem(listItem){var flagChanged=this._setFlag(listItem.getAttribute("data-country-code"));this._closeDropdown();this._updateDialCode(listItem.getAttribute("data-dial-code"),true);this.telInput.focus();var len=this.telInput.value.length;this.telInput.setSelectionRange(len,len);if(flagChanged){this._triggerCountryChange();}}},{key:"_closeDropdown",value:function _closeDropdown(){this.countryList.classList.add("iti__hide");this.selectedFlag.setAttribute("aria-expanded","false");this.dropdownArrow.classList.remove("iti__arrow--up");document.removeEventListener("keydown",this._handleKeydownOnDropdown);document.documentElement.removeEventListener("click",this._handleClickOffToClose);this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList);this.countryList.removeEventListener("click",this._handleClickCountryList);if(this.options.dropdownContainer){if(!this.isMobile)window.removeEventListener("scroll",this._handleWindowScroll);if(this.dropdown.parentNode)this.dropdown.parentNode.removeChild(this.dropdown);}
this._trigger("close:countrydropdown");}},{key:"_scrollTo",value:function _scrollTo(element,middle){var container=this.countryList;var windowTop=window.pageYOffset||document.documentElement.scrollTop;var containerHeight=container.offsetHeight;var containerTop=container.getBoundingClientRect().top+windowTop;var containerBottom=containerTop+containerHeight;var elementHeight=element.offsetHeight;var elementTop=element.getBoundingClientRect().top+windowTop;var elementBottom=elementTop+elementHeight;var newScrollTop=elementTop-containerTop+container.scrollTop;var middleOffset=containerHeight/2-elementHeight/2;if(elementTop<containerTop){if(middle)newScrollTop-=middleOffset;container.scrollTop=newScrollTop;}else if(elementBottom>containerBottom){if(middle)newScrollTop+=middleOffset;var heightDifference=containerHeight-elementHeight;container.scrollTop=newScrollTop-heightDifference;}}},{key:"_updateDialCode",value:function _updateDialCode(newDialCodeBare,hasSelectedListItem){var inputVal=this.telInput.value;var newDialCode="+".concat(newDialCodeBare);var newNumber;if(inputVal.charAt(0)==="+"){var prevDialCode=this._getDialCode(inputVal);if(prevDialCode){newNumber=inputVal.replace(prevDialCode,newDialCode);}else{newNumber=newDialCode;}}else if(this.options.nationalMode||this.options.separateDialCode){return;}else{if(inputVal){newNumber=newDialCode+inputVal;}else if(hasSelectedListItem||!this.options.autoHideDialCode){newNumber=newDialCode;}else{return;}}
this.telInput.value=newNumber;}},{key:"_getDialCode",value:function _getDialCode(number,includeAreaCode){var dialCode="";if(number.charAt(0)==="+"){var numericChars="";for(var i=0;i<number.length;i++){var c=number.charAt(i);if(!isNaN(parseInt(c,10))){numericChars+=c;if(includeAreaCode){if(this.countryCodes[numericChars]){dialCode=number.substr(0,i+1);}}else{if(this.dialCodes[numericChars]){dialCode=number.substr(0,i+1);break;}}
if(numericChars.length===this.countryCodeMaxLen){break;}}}}
return dialCode;}},{key:"_getFullNumber",value:function _getFullNumber(){var val=this.telInput.value.trim();var dialCode=this.selectedCountryData.dialCode;var prefix;var numericVal=this._getNumeric(val);if(this.options.separateDialCode&&val.charAt(0)!=="+"&&dialCode&&numericVal){prefix="+".concat(dialCode);}else{prefix="";}
return prefix+val;}},{key:"_beforeSetNumber",value:function _beforeSetNumber(originalNumber){var number=originalNumber;if(this.options.separateDialCode){var dialCode=this._getDialCode(number);if(dialCode){dialCode="+".concat(this.selectedCountryData.dialCode);var start=number[dialCode.length]===" "||number[dialCode.length]==="-"?dialCode.length+1:dialCode.length;number=number.substr(start);}}
return this._cap(number);}},{key:"_triggerCountryChange",value:function _triggerCountryChange(){this._trigger("countrychange");}},{key:"handleAutoCountry",value:function handleAutoCountry(){if(this.options.initialCountry==="auto"){this.defaultCountry=window.intlTelInputGlobals.autoCountry;if(!this.telInput.value){this.setCountry(this.defaultCountry);}
this.resolveAutoCountryPromise();}}},{key:"handleUtils",value:function handleUtils(){if(window.intlTelInputUtils){if(this.telInput.value){this._updateValFromNumber(this.telInput.value);}
this._updatePlaceholder();}
this.resolveUtilsScriptPromise();}},{key:"destroy",value:function destroy(){var form=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown();this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag);this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var label=this._getClosestLabel();if(label)label.removeEventListener("click",this._handleLabelClick);}
if(this.hiddenInput&&form)form.removeEventListener("submit",this._handleHiddenInputSubmit);if(this.options.autoHideDialCode){if(form)form.removeEventListener("submit",this._handleSubmitOrBlurEvent);this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent);}
this.telInput.removeEventListener("keyup",this._handleKeyupEvent);this.telInput.removeEventListener("cut",this._handleClipboardEvent);this.telInput.removeEventListener("paste",this._handleClipboardEvent);this.telInput.removeAttribute("data-intl-tel-input-id");var wrapper=this.telInput.parentNode;wrapper.parentNode.insertBefore(this.telInput,wrapper);wrapper.parentNode.removeChild(wrapper);delete window.intlTelInputGlobals.instances[this.id];}},{key:"getExtension",value:function getExtension(){if(window.intlTelInputUtils){return intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2);}
return"";}},{key:"getNumber",value:function getNumber(format){if(window.intlTelInputUtils){var iso2=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),iso2,format);}
var val=this.telInput.value.trim();var dialCode=this.selectedCountryData.dialCode;var prefix;var numericVal=this._getNumeric(val);if(val.charAt(0)!=="+"&&dialCode&&numericVal){prefix="+".concat(dialCode);}else{prefix="";}
return prefix+val;}},{key:"getNumberType",value:function getNumberType(){if(window.intlTelInputUtils){return intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2);}
return-99;}},{key:"getSelectedCountryData",value:function getSelectedCountryData(){return this.selectedCountryData;}},{key:"getValidationError",value:function getValidationError(){if(window.intlTelInputUtils){var iso2=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),iso2);}
return-99;}},{key:"isValidNumber",value:function isValidNumber(){var val=this._getFullNumber().trim();var countryCode=this.options.nationalMode?this.selectedCountryData.iso2:"";return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(val,countryCode):null;}},{key:"setCountry",value:function setCountry(originalCountryCode){var countryCode=originalCountryCode.toLowerCase();if(!this.selectedFlagInner.classList.contains("iti__".concat(countryCode))){this._setFlag(countryCode);this._updateDialCode(this.selectedCountryData.dialCode,false);this._triggerCountryChange();}}},{key:"setNumber",value:function setNumber(number){var flagChanged=this._updateFlagFromNumber(number);this._updateValFromNumber(number);if(flagChanged){this._triggerCountryChange();}}},{key:"setPlaceholderNumberType",value:function setPlaceholderNumberType(type){this.options.placeholderNumberType=type;this._updatePlaceholder();}}]);return Iti;}();intlTelInputGlobals.getCountryData=function(){return allCountries;};var injectScript=function injectScript(path,handleSuccess,handleFailure){var script=document.createElement("script");script.onload=function(){forEachInstance("handleUtils");if(handleSuccess)handleSuccess();};script.onerror=function(){forEachInstance("rejectUtilsScriptPromise");if(handleFailure)handleFailure();};script.className="iti-load-utils";script.async=true;script.src=path;document.body.appendChild(script);};intlTelInputGlobals.loadUtils=function(path){if(!window.intlTelInputUtils&&!window.intlTelInputGlobals.startedLoadingUtilsScript){window.intlTelInputGlobals.startedLoadingUtilsScript=true;if(typeof Promise!=="undefined"){return new Promise(function(resolve,reject){return injectScript(path,resolve,reject);});}
injectScript(path);}
return null;};intlTelInputGlobals.defaults=defaults;intlTelInputGlobals.version="17.0.8";var pluginName="intlTelInput";$.fn[pluginName]=function(options){var args=arguments;if(options===undefined||typeof options==="object"){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){var iti=new Iti(this,options);iti._init();window.intlTelInputGlobals.instances[iti.id]=iti;$.data(this,"plugin_"+pluginName,iti);}});}else if(typeof options==="string"&&options[0]!=="_"){var returns;this.each(function(){var instance=$.data(this,"plugin_"+pluginName);if(instance instanceof Iti&&typeof instance[options]==="function"){returns=instance[options].apply(instance,Array.prototype.slice.call(args,1));}
if(options==="destroy")$.data(this,"plugin_"+pluginName,null);});return returns!==undefined?returns:this;}};});