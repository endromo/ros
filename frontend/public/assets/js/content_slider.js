$(function(){$.FI.extend(function(){$(this).find('.content_slider_slides > div:not(.bx-wrapper)').each(function(){var jthis=$(this);var bxSlider=jthis.data('bxSlider');if(bxSlider)
return bxSlider.reloadSlider();var hash=window.location.hash;var slider=jthis.closest('.content_slider');var timeout=slider.attr('data-timeout');var speed=slider.attr('data-speed');var autoplay=slider.attr('data-autoplay');var mode=slider.attr('data-mode');var easing=slider.attr('data-easing');var controls=slider.attr('data-controls');var pager=slider.attr('data-pager');var slides=jthis.find('.content_slider_slide');var playicon=jthis.find('.content_slider_play_icon,.content_slider_slide:not(.mixed) .featured_img_overlay');var videos=jthis.find('video');var startIndex=(hash?parseInt(hash.replace('#',''))||0:0);var hardstop=false;var timeouts=[];autoplay=(autoplay?autoplay.match(/true|1/i):true);if(slides.length&&startIndex>slides.length-1)
startIndex=slides.length-1;var playPauseVideo=function(slideIndex,play){var slide=(slideIndex instanceof jQuery?slideIndex:slides.eq(slideIndex));if(!slide||!slide.length)
return;var isplaying=slide.is('.playing');var ismixed=slide.is('.mixed');var isautoplay=slide.data('video-autoplay');var bxSlider=slide.parent().data('bxSlider');if(typeof(play)=='undefined')
play=isautoplay;if(ismixed&&!isplaying&&!play)
return;var jvideo=slide.find('video,iframe').eq(0);var video=jvideo.get(0);if(!video)
return;if(play){hardstop=true;slide.addClass('playing');if(bxSlider)
bxSlider.stopAuto();}else{hardstop=false;slide.removeClass('playing');if(bxSlider&&autoplay&&!hardstop)
bxSlider.startAuto();}
if(video.tagName=="VIDEO"){if(play){video.play();if(isautoplay){jvideo.bind('ended.content_slider_video',function(){hardstop=false;if(bxSlider&&autoplay){bxSlider.startAuto();bxSlider.goToNextSlide();}});}}else{video.pause();}
return;}
if(!video.src)
return;if(!jvideo.data('loaded')){jvideo.data('loaded',true);jvideo.bind('load',function(){setTimeout(function(){playPauseVideo(slideIndex,play);},100);});}
try{if(video.src.indexOf('dailymotion.com')!=-1){video.contentWindow.postMessage((play?'play':'pause'),'*');}else if(video.src.indexOf('youtube.com')!=-1){if(play&&YT&&YT.Player&&!jvideo.data('ytPlayer')){var ytPlayer=new YT.Player(jvideo.attr('id'),{events:{onReady:function(event){if(video.src.indexOf('mute=1')!=-1)
event.target.mute();},onStateChange:function(event){if(event&&event.data===0){if(isautoplay&&slides&&slides.length==1&&autoplay){video.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}','*');}else{jvideo.data('ended',true);hardstop=false;if(bxSlider&&autoplay){bxSlider.startAuto();bxSlider.goToNextSlide();}}}}}});jvideo.data('ytPlayer',ytPlayer);}
if(play)
jvideo.data('ended',false);video.contentWindow.postMessage('{"event":"command","func":"'+
(play?'play':(!ismixed||jvideo.data('ended')?'stop':'pause'))+'Video","args":""}','*');}else if(video.src.indexOf('vimeo.com')!=-1){if(play&&Vimeo&&Vimeo.Player&&!jvideo.data('vPlayer')){var vPlayer=new Vimeo.Player(video);var onEnded=function(){if(isautoplay&&slides&&slides.length==1&&autoplay){video.contentWindow.postMessage('{"method":"play"}','*');}else{hardstop=false;if(bxSlider&&autoplay){bxSlider.startAuto();bxSlider.goToNextSlide();}}};if(video.src.indexOf('mute=1')!=-1)
vPlayer.setVolume(0);if(isautoplay&&slides&&slides.length==1&&autoplay)
vPlayer.setLoop(true);vPlayer.on('ended',onEnded);vPlayer.on('finish',onEnded);jvideo.data('vPlayer',vPlayer);}
video.contentWindow.postMessage('{"method":"'+(play?'play':'pause')+'"}','*');}}catch(e){}};var resetContentAnimations=function(slideIndex){var slide=slides.eq(slideIndex);if(!slide||!slide.length)
return;var animation=slide.attr('data-content-animation');if(!animation)
return;slide.find('.featured_img_overlay > div > *.animated,'+'.featured_img_overlay > div > table > tr > td > *.animated,'+'.featured_img_overlay > div > table > tbody > tr > td > *.animated').each(function(){var cssclasses=this.getAttribute('class');if(!cssclasses)
return;this.setAttribute('class',cssclasses.replace(/(^| )animated.*$/,''));});};var startContentAnimations=function(slideIndex){if(timeouts&&timeouts.length){for(var i in timeouts)
clearTimeout(timeouts[i]);timeouts=[];}
var slide=slides.eq(slideIndex);if(!slide||!slide.length)
return;var animation=slide.data('content-animation');var onebyone=$.isArray(animation);if(!animation)
return;var additional_delay=(!slide.data('content-animation-while-sliding')?(speed?parseFloat(speed)*1000:1000):0);slide.find('.featured_img_overlay > div').filter(function(){if($(this).css('display')=='none')
return false;return true;}).find('> *:not(table),'+'> table > tr > td > *,'+'> table > tbody > tr > td > *').each(function(i){var element=this;var cssclasses=element.getAttribute('class');if(onebyone){if(!animation[i])
animation[i]={'in':{delay:'',effect:''}};if(!animation[i]['in'])
animation[i]['in']={delay:'',effect:''};timeouts[timeouts.length]=setTimeout(function(){element.setAttribute('class',(cssclasses?cssclasses+' ':'')+'animated '+(animation[i]['in'].effect?animation[i]['in'].effect:''));},(animation[i]['in'].delay?parseFloat(animation[i]['in'].delay)*1000+additional_delay:0+(animation[i]['in'].effect?additional_delay:0)));if(animation[i]['out']&&animation[i]['out'].effect){timeouts[timeouts.length]=setTimeout(function(){element.setAttribute('class',(cssclasses?cssclasses+' ':'')+'animated '+(animation[i]['out'].effect?animation[i]['out'].effect:''));},(animation[i]['out'].delay?parseFloat(animation[i]['out'].delay)*1000+additional_delay:0+(animation[i]['in'].effect?1000:0)+
(animation[i]['in'].delay?parseFloat(animation[i]['in'].delay)*1000:0)+
additional_delay));}}else{timeouts[timeouts.length]=setTimeout(function(){element.setAttribute('class',(cssclasses?cssclasses+' ':'')+'animated '+(animation?animation:''));},0+additional_delay);}});};videos.unbind('.content_slider').bind('click.content_slider',function(){(this.paused?this.play():this.pause());});playicon.unbind('.content_slider').bind('click.content_slider',function(){playPauseVideo($(this).closest('.content_slider_slide'),true);});bxSlider=jthis.bxSlider({slideZIndex:1,adaptiveHeight:true,video:true,startSlide:startIndex,useCSS:(easing&&!easing.match(/^(ease(-in|-out|-in-out)?|linear)$/)?false:true),easing:(easing?easing:'ease'),speed:(speed?parseFloat(speed)*1000:1000),mode:(mode?mode:'horizontal'),controls:(slides.length>1?(controls?controls.match(/true|1/i):true):false),pager:(slides.length>1?(pager?pager.match(/true|1/i):true):false),touchEnabled:(slides.length>1?true:false),pagerSelector:slider.parent().find('.content_slider_pager'),prevText:'',nextText:'',pause:(timeout?parseInt(timeout)*1000:5000)+(speed?parseInt(speed)*1000:1000),onSliderLoad:function(){jthis.find('.content_slider_slide.bx-clone iframe').each(function(){this.setAttribute('id',this.getAttribute('id')+'-clone');});},onSlideBefore:function(slider,oldIndex,newIndex){hardstop=false;startContentAnimations(newIndex);playPauseVideo(oldIndex,false);},onSlideAfter:function(slider,oldIndex,newIndex){resetContentAnimations(oldIndex);playPauseVideo(newIndex);}});startContentAnimations(startIndex);playPauseVideo(startIndex);if(autoplay&&slides.length>1){if(!slides.eq(startIndex).is('.playing'))
bxSlider.startAuto();slides.click(function(){hardstop=true;bxSlider.stopAuto();});$(window).focus(function(){if(!hardstop)
bxSlider.startAuto();}).blur(function(){bxSlider.stopAuto();});}});});});